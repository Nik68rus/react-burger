{"version":3,"sources":["components/loader/loader.module.css","components/modal-overlay/modal-overlay.module.css","pages/forms.module.css","pages/profile.module.css","utils/hooks.ts","services/actions/app.ts","utils/cookies.ts","utils/data.ts","services/actions/user.ts","services/actions/index.ts","services/actions/ingredient.ts","components/app-header/app-header.tsx","components/error-message/error-message.tsx","components/loader/loader.svg.tsx","components/loader/loader.tsx","components/notification/notification.tsx","pages/layout.tsx","components/ingredient/ingredient.tsx","components/burger-ingredients/burger-ingredients.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/tick.gif","components/order-details/order-details.tsx","components/burger-part/burger-part.tsx","components/burger-constructor/burger-constructor.tsx","pages/home.tsx","pages/forgot-password.tsx","components/ingredient-details/ingredient-details.tsx","components/page-404/page-404.tsx","pages/ingredient.tsx","pages/login.tsx","components/ingredients/ingredients.tsx","utils/date.ts","components/feed-item/feed-item.tsx","services/actions/web-socket.ts","pages/profile.tsx","pages/register.tsx","pages/reset-password.tsx","pages/not-found.tsx","components/order-ingredient/order-ingredient.tsx","components/order-contetnt/order-content.tsx","pages/order.tsx","components/order-list/order-list.tsx","components/figure/figure.tsx","pages/feed.tsx","components/protected-route/protected-route.tsx","components/switcher/switcher.tsx","components/app/App.tsx","reportWebVitals.ts","services/reducers/ingredient.ts","services/reducers/app.ts","services/reducers/user.ts","services/reducers/web-socket.ts","services/reducers/index.ts","services/middleware/socket-middleware.ts","index.tsx","components/app-header/app-header.module.css","components/burger-constructor/burger-constructor.module.css","components/burger-ingredients/burger-ingredients.module.css","components/ingredient-details/ingredient-details.module.css","components/ingredients/ingredients.module.css","components/order-contetnt/order-content.module.css","pages/feed.module.css","components/feed-item/feed-item.module.css","components/notification/notification.module.css","components/modal/modal.module.css","components/order-ingredient/order-ingredient.module.css","components/order-details/order-details.module.css","components/order-list/order-list.module.css","components/ingredient/ingredient.module.css","components/burger-part/burger-part.module.css","components/page-404/page-404.module.css"],"names":["module","exports","useSelector","selectorHook","useDispatch","dispatchHook","SET_ERROR","SET_MESSAGE","SHOW_LOADER","HIDE_LOADER","LOCK_CONSTRUCTOR","UNLOCK_CONSTRUCTOR","showNotification","message","duration","dispatch","setMessage","setTimeout","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","encodeURIComponent","updatedCookie","propName","propValue","deleteCookie","URL","WS_URL","Paths","Status","done","created","pending","SIGN_IN","SIGN_OUT","REQUEST_RECOVERY","RECOVERY_SUCCESS","REGISTRATION_SUCCESS","checkAuth","showLoader","fetch","method","mode","cache","credentials","headers","Authorization","redirect","referrerPolicy","then","response","json","data","success","signIn","user","refreshToken","catch","err","finally","hideLoader","body","JSON","stringify","token","ok","authToken","accessToken","split","type","setError","payload","setIngredient","SET_INGREDIENT","orderFailed","ORDER_FAILED","signOut","requestRecovery","recoverySuccess","registrationSuccess","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","SET_CART","RESET_CART","REMOVE_INGREDIENT","ADD_TO_CART","REMOVE_FROM_CART","ORDER_REQUEST","ORDER_SUCCESS","ORDER_RESET","getInredients","status","Error","getIngredientsSuccess","makeOrder","orderSuccess","AppHeader","className","styles","header","wrapper","menu","button","exact","to","activeClassName","active","logo","usermenu","ErrorMessage","LoaderSvg","color","size","width","height","viewBox","xmlns","stroke","fill","fillRule","transform","strokeWidth","strokeOpacity","cx","cy","r","attributeName","from","dur","repeatCount","loaderSizes","small","medium","large","Loader","inverse","loaderColor","wrapperStyleKey","style","notificationRoot","getElementById","Notification","store","app","isActive","length","ReactDOM","createPortal","notification","container","closeBtn","onClick","Layout","children","error","loader","Ingredient","item","history","useHistory","location","useLocation","cart","ingredient","useDrag","ingRef","amount","filter","cartItem","_id","pathname","state","background","modal","ref","count","src","image","alt","price","toLocaleString","tabs","id","title","BurgerIngredients","useState","current","setCurrent","tabClick","setTabClick","list","isLoading","ingredientsRequest","tabClickHandler","useEffect","querySelector","controls","headings","querySelectorAll","border","getBoundingClientRect","bottom","scrollHandler","distances","forEach","heading","i","coords","Math","abs","top","currentMinDistance","min","distance","addEventListener","removeEventListener","scrollIntoView","behavior","filteredList","bun","sauce","main","tab","ingredients","map","tabItem","Fragment","element","ModalOverlay","overlay","modalRoot","Modal","onClose","useParams","find","ing","ingredientsLoaded","escPressHandler","React","useCallback","evt","key","content","OrderDetails","tickImage","BurgerPart","index","onMove","findIndex","ingredientRemoveHandler","end","monitor","didDrop","drag","useDrop","accept","canDrop","hover","dragIndex","drop","node","btn","text","thumbnail","handleClose","BurgerConstructor","order","isAuthorized","locked","dropTarget","partDropTarget","el","totalAmount","reduce","acc","partMoveHandler","oldIndex","newIndex","newCart","lockStyle","constructor","empty","isLocked","summary","bunIndex","burgerInner","number","HomePage","DndProvider","backend","HTML5Backend","ForgotPasswordPage","mail","setMail","requested","recoveryRequested","login","form","onSubmit","preventDefault","trim","email","requestPasswordRecovery","onChange","target","placeholder","actions","IngredientDetails","currentIngredient","details","image_large","info","calories","proteins","fat","carbohydrates","Page404","link","IngredientPage","LoginPage","password","setForm","formChangeHandler","prevForm","oldState","icon","Ingredients","listContent","zIndex","slice","withextra","extra","formatDate","date","string","HOUR","now","Days","getDate","day","toLocaleDateString","month","toLocaleTimeString","hour","minute","FeedItem","burger","showStatus","createdAt","feedItem","footer","pictures","curIng","push","getPictures","WS_CONNECTION_START","WS_CONNECTION_CLOSE","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","WS_CONNECTION_AUTH_START","WS_CONNECTION_AUTH_CLOSE","WS_CONNECTION_AUTH_SUCCESS","WS_CONNECTION_AUTH_ERROR","WS_CONNECTION_AUTH_CLOSED","WS_GET_AUTH_MESSAGE","wsConnectionStart","url","wsConnectionClose","wsConnectionAuthStart","wsConnectionAuthClose","ProfilePage","nameDisabled","setNameDisabled","mailDisabled","setMailDisabled","passwordDisabled","setPasswordDisabled","orders","ws","orderHistory","wsAuthConnected","useRouteMatch","sortedOrders","sort","a","b","initialState","isTouched","cleaner","profile","navbar","description","disabled","onIconClick","onBlur","prevState","RegisterPage","justRegistered","ResetPasswordPage","code","recoveryDone","NotFoundPage","OrderIngredient","OrderContent","feed","allOrders","concat","ingredientsData","Set","total","OrderPage","privateRoute","orderBase","orderIndex","useMemo","orderId","OrderList","items","itemNumber","Figure","label","FeedPage","totalToday","ordersDone","ordersInProgress","stats","figures","ProtectedRoute","rest","isUserLoaded","setUserLoaded","render","Switcher","modalType","orderHideHandler","path","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ingredientsFailed","orderRequest","wsConnected","rootReducer","combineReducers","action","socketMiddleware","wsActions","socket","next","wsInit","wsClose","onOpen","onError","onMessage","WebSocket","close","onopen","event","onerror","onmessage","parsedData","parse","restParsedData","onclose","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","wsAuthActions","enhancer","applyMiddleware","thunk","createStore","StrictMode"],"mappings":"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","file":"static/js/main.76a9234c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"large\":\"loader_large__3791r\",\"medium\":\"loader_medium__23e-B\",\"small\":\"loader_small__2h1rL\",\"wrapper_large\":\"loader_wrapper_large__12lpv\",\"wrapper_medium\":\"loader_wrapper_medium__1c2sB\",\"wrapper_small\":\"loader_wrapper_small__w6PzE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__AKixE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"forms_login__1jOr2\",\"heading\":\"forms_heading__ULrXY\",\"form\":\"forms_form__2rK1V\",\"actions\":\"forms_actions__210Zz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"profile_profile__3ILEA\",\"navbar\":\"profile_navbar__1-cAn\",\"link\":\"profile_link__1-_Is\",\"button\":\"profile_button__38wGI\",\"active\":\"profile_active__4c5X0\",\"description\":\"profile_description__2Kdfw\",\"form\":\"profile_form__1yxrZ\",\"actions\":\"profile_actions__3_HFg\",\"orders\":\"profile_orders__ix_KB\"};","import { TypedUseSelectorHook, useSelector as selectorHook, useDispatch as dispatchHook } from 'react-redux';\nimport { RootState, AppDispatch } from '../types';\n\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\nexport const useDispatch = () => dispatchHook<AppDispatch>();","import { setMessage } from '.';\nimport { AppDispatch, AppThunk } from '../../types';\n\nexport const SET_ERROR: 'SET_ERROR' = 'SET_ERROR';\nexport const SET_MESSAGE: 'SET_MESSAGE' = 'SET_MESSAGE';\nexport const SHOW_LOADER: 'SHOW_LOADER' = 'SHOW_LOADER';\nexport const HIDE_LOADER: 'HIDE_LOADER' = 'HIDE_LOADER';\nexport const LOCK_CONSTRUCTOR: 'LOCK_CONSTRUCTOR' = 'LOCK_CONSTRUCTOR';\nexport const UNLOCK_CONSTRUCTOR: 'UNLOCK_CONSTRUCTOR' = 'UNLOCK_CONSTRUCTOR';\n\nexport interface IShowLoaderAction {\n  readonly type: typeof SHOW_LOADER;\n}\n\nexport interface IHideLoaderAction {\n  readonly type: typeof HIDE_LOADER;\n}\n\nexport interface ILockConstructorAction {\n  readonly type: typeof LOCK_CONSTRUCTOR;\n}\n\nexport interface IUnlockConstructorAction {\n  readonly type: typeof UNLOCK_CONSTRUCTOR;\n}\n\nexport interface ISetErrorAction {\n  readonly type: typeof SET_ERROR;\n}\n\nexport interface ISetMessageAction {\n  readonly type: typeof SET_MESSAGE;\n  readonly payload: string;\n}\n\nexport type TAppActions =\n  | IShowLoaderAction\n  | IHideLoaderAction\n  | ISetErrorAction\n  | ISetMessageAction\n  | ILockConstructorAction\n  |IUnlockConstructorAction;\n\nexport const showNotification: AppThunk = (message: string, duration: number = 3000) => (dispatch: AppDispatch) => {\n  dispatch(setMessage(message));\n  setTimeout(() => {\n    dispatch(setMessage(''));\n  }, duration);\n};\n","export const getCookie = (name: string) => {\n  const matches = document.cookie.match(\n    new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nexport const setCookie = (name: string, value: string | null, props?: {[key: string]: any}) => {\n  props = props || {};\n  let exp = props.expires;\n  if (typeof exp == 'number' && exp) {\n    const d = new Date();\n    d.setTime(d.getTime() + exp * 1000);\n    exp = props.expires = d;\n  }\n  if (exp && exp.toUTCString) {\n    props.expires = exp.toUTCString();\n  }\n  if (value) {\n    value = encodeURIComponent(value);\n  }\n  let updatedCookie = name + '=' + value;\n  for (const propName in props) {\n    updatedCookie += '; ' + propName;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += '=' + propValue;\n    }\n  }\n  document.cookie = updatedCookie;\n}\n\nexport const deleteCookie = (name: string) => {\n  setCookie(name, null, { expires: -1 });\n}\n","const URL = 'https://norma.nomoreparties.space/api';\nconst WS_URL = 'wss://norma.nomoreparties.space/orders';\n\n\nconst Paths = {\n  HOME: '/',\n  LOGIN: '/login',\n  REGISTER: '/register',\n  FORGOT: '/forgot-password',\n  RESET: '/reset-password',\n  PROFILE: '/profile',\n  ORDERS: '/profile/orders',\n  INGREDIENTS: '/ingredients',\n  FEED: '/feed'\n}\n\nconst Status = {\n  done: 'Выполнен',\n  created: 'Создан',\n  pending: 'Готовится',\n};\n\nexport {URL, WS_URL, Paths, Status};","import { AppThunk, TRegistrationData, TResetData } from './../../types/index';\nimport {\n  hideLoader,\n  recoverySuccess,\n  registrationSuccess,\n  requestRecovery,\n  showLoader,\n  signIn,\n  signOut,\n} from '.';\nimport { AppDispatch, TUserData } from '../../types';\nimport { deleteCookie, getCookie, setCookie } from '../../utils/cookies';\nimport { URL } from '../../utils/data';\nimport { showNotification } from './app';\n\nexport const SIGN_IN: 'SIGN_IN' = 'SIGN_IN';\nexport const SIGN_OUT: 'SIGN_OUT' = 'SIGN_OUT';\nexport const CHECK_AUTH: 'CHECK_AUTH' = 'CHECK_AUTH';\nexport const REQUEST_RECOVERY: 'REQUEST_RECOVERY' = 'REQUEST_RECOVERY';\nexport const RECOVERY_SUCCESS: 'RECOVERY_SUCCESS' = 'RECOVERY_SUCCESS';\nexport const REGISTRATION_SUCCESS: 'REGISTRATION_SUCCESS' =\n  'REGISTRATION_SUCCESS';\n\nexport interface ISignInAction {\n  readonly type: typeof SIGN_IN;\n  readonly payload: TUserData;\n}\n\nexport interface ISignOutAction {\n  readonly type: typeof SIGN_OUT;\n}\n\nexport interface IRequestRecoveryAction {\n  readonly type: typeof REQUEST_RECOVERY;\n}\n\nexport interface IRecoverySuccessAction {\n  readonly type: typeof RECOVERY_SUCCESS;\n}\n\nexport interface IRegistrationSuccessAction {\n  readonly type: typeof REGISTRATION_SUCCESS;\n}\n\nexport type TUserActions =\n  | ISignInAction\n  | ISignOutAction\n  | IRequestRecoveryAction\n  | IRecoverySuccessAction\n  | IRegistrationSuccessAction;\n\nexport const checkAuth: AppThunk = () => {\n  return (dispatch: AppDispatch) => {\n    dispatch(showLoader());\n    fetch(`${URL}/auth/user`, {\n      method: 'GET',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + getCookie('token'),\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n    })\n      .then((response) => response.json())\n      .then((data) => {\n        if (data.success) {\n          dispatch(signIn(data.user));\n        } else {\n          dispatch(refreshToken());\n        }\n      })\n      .catch((err) => {\n        dispatch(\n          showNotification('Не удалось получить данные о пользователе!')\n        );\n      })\n      .finally(() => {\n        dispatch(hideLoader());\n      });\n  };\n};\n\nexport const refreshToken: AppThunk = () => (dispatch: AppDispatch) => {\n  const refreshToken = getCookie('rtoken');\n  if (refreshToken) {\n    fetch(`${URL}/auth/token`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ token: refreshToken }),\n    })\n      .then((response) => {\n        dispatch(hideLoader());\n        if (!response.ok) {\n          dispatch(\n            showNotification('Не удалось получить данные о пользователе!')\n          );\n        }\n        return response.json();\n      })\n      .then((data) => {\n        if (!data.success) {\n          dispatch(showNotification(data.message));\n        } else {\n          const authToken = data.accessToken.split('Bearer ')[1];\n          const refreshToken = data.refreshToken;\n          if (authToken) {\n            setCookie('token', authToken);\n          }\n          if (refreshToken) {\n            setCookie('rtoken', refreshToken);\n          }\n          dispatch(checkAuth());\n        }\n      });\n  }\n};\n\nexport const makeSignIn: AppThunk = (data: TUserData) => {\n  return (dispatch: AppDispatch) => {\n    fetch(`${URL}/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          dispatch(showNotification('Что-то пошло не так. Попробуйте позже!'));\n        }\n        return response.json();\n      })\n      .then((data) => {\n        if (!data.success) {\n          dispatch(showNotification(data.message));\n        } else {\n          const authToken = data.accessToken.split('Bearer ')[1];\n          const refreshToken = data.refreshToken;\n          if (authToken) {\n            setCookie('token', authToken);\n          }\n          if (refreshToken) {\n            setCookie('rtoken', refreshToken);\n          }\n          dispatch(\n            signIn({\n              ...data.user,\n              password: data.password,\n            })\n          );\n        }\n      });\n  };\n};\n\nexport const makeSignOut: AppThunk = () => {\n  return (dispatch: AppDispatch) => {\n    fetch(`${URL}/auth/logout`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ token: getCookie('rtoken') }),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          dispatch(showNotification('Что-то пошло не так. Попробуйте позже!'));\n        }\n        return response.json();\n      })\n      .then((data) => {\n        if (!data.success) {\n          dispatch(showNotification(data.message));\n        } else {\n          deleteCookie('token');\n          deleteCookie('rtoken');\n          dispatch(signOut());\n        }\n      });\n  };\n};\n\nexport const requestPasswordRecovery: AppThunk = (mail: string) => {\n  return (dispatch: AppDispatch) => {\n    fetch(`${URL}/password-reset`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ email: mail }),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          dispatch(showNotification('Что-то пошло не так. Попробуйте позже!'));\n        }\n        return response.json();\n      })\n      .then((data) => {\n        if (!data.success) {\n          dispatch(showNotification(data.message));\n        } else {\n          dispatch(requestRecovery());\n          dispatch(\n            showNotification(\n              'На вашу почту отправлен код для восстановления пароля'\n            )\n          );\n        }\n      });\n  };\n};\n\nexport const resetPassword: AppThunk = (data: TResetData) => {\n  return (dispatch: AppDispatch) => {\n    fetch(`${URL}/password-reset/reset`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ password: data.password, token: data.code }),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          dispatch(showNotification('Что-то пошло не так. Попробуйте позже!'));\n        }\n        return response.json();\n      })\n      .then((data) => {\n        if (!data.success) {\n          dispatch(showNotification(data.message));\n        } else {\n          dispatch(showNotification('Пароль успешно изменен!'));\n          dispatch(recoverySuccess());\n        }\n      });\n  };\n};\n\nexport const registerUser: AppThunk = (data: TRegistrationData) => {\n  return (dispatch: AppDispatch) => {\n    fetch(`${URL}/auth/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          dispatch(showNotification('Что-то пошло не так. Попробуйте позже!'));\n        }\n        return response.json();\n      })\n      .then((data) => {\n        if (!data.success) {\n          dispatch(showNotification(data.message));\n        } else {\n          dispatch(\n            showNotification(\n              'Регистрация прошла успешно. Вы можете войти под своими учетными данными!'\n            )\n          );\n          setTimeout(() => {\n            dispatch(registrationSuccess());\n          }, 1000);\n        }\n      });\n  };\n};\n\nexport const updateUser: AppThunk = (data: TRegistrationData) => {\n  return (dispatch: AppDispatch) => {\n    fetch(`${URL}/auth/user`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + getCookie('token'),\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          dispatch(showNotification('Что-то пошло не так. Попробуйте позже!'));\n        }\n        return response.json();\n      })\n      .then((data) => {\n        if (!data.success) {\n          dispatch(showNotification(data.message));\n        } else {\n          dispatch(showNotification('Данные пользователя успешно обновлены!'));\n        }\n      });\n  };\n};\n","import type { TItem, TUserData } from './../../types/index';\n\nimport {\n  SET_ERROR,\n  SET_MESSAGE,\n  SHOW_LOADER,\n  HIDE_LOADER,\n  LOCK_CONSTRUCTOR,\n  UNLOCK_CONSTRUCTOR,\n} from './app';\n\nimport type {\n  IShowLoaderAction,\n  IHideLoaderAction,\n  IUnlockConstructorAction,\n  ILockConstructorAction,\n  ISetErrorAction,\n  ISetMessageAction,\n} from './app';\n\nimport {\n  GET_INGREDIENTS_REQUEST,\n  GET_INGREDIENTS_SUCCESS,\n  GET_INGREDIENTS_FAILED,\n  SET_CART,\n  RESET_CART,\n  SET_INGREDIENT,\n  REMOVE_INGREDIENT,\n  ADD_TO_CART,\n  REMOVE_FROM_CART,\n  ORDER_REQUEST,\n  ORDER_SUCCESS,\n  ORDER_FAILED,\n  ORDER_RESET,\n} from './ingredient';\n\nimport type {\n  IGetIngredientsRequestAction,\n  IGetIngredientsSuccessAction,\n  IGetIngredientsFailedAction,\n  ISetCartAction,\n  IResetCartAction,\n  ISetIngredientAction,\n  IRemoveIngredientAction,\n  IAddToCartAction,\n  IRemoveFromCartAction,\n  IOrderRequestAction,\n  IOrderSuccessAction,\n  IOrderFailedAction,\n  IOrderResetAction,\n} from './ingredient';\n\nimport {\n  SIGN_IN,\n  SIGN_OUT,\n  REQUEST_RECOVERY,\n  RECOVERY_SUCCESS,\n  REGISTRATION_SUCCESS,\n} from './user';\n\nimport type {\n  ISignInAction,\n  ISignOutAction,\n  IRequestRecoveryAction,\n  IRecoverySuccessAction,\n  IRegistrationSuccessAction,\n} from './user';\n\nexport const showLoader = (): IShowLoaderAction => {\n  return {\n    type: SHOW_LOADER,\n  };\n};\n\nexport const hideLoader = (): IHideLoaderAction => {\n  return {\n    type: HIDE_LOADER,\n  };\n};\n\nexport const lockConstructor = (): ILockConstructorAction => {\n  return {\n    type: LOCK_CONSTRUCTOR,\n  };\n};\n\nexport const unlockConstructor = (): IUnlockConstructorAction => {\n  return {\n    type: UNLOCK_CONSTRUCTOR,\n  };\n};\n\nexport const setError = (): ISetErrorAction => {\n  return {\n    type: SET_ERROR,\n  };\n};\n\nexport const setMessage = (data: string): ISetMessageAction => {\n  return {\n    type: SET_MESSAGE,\n    payload: data,\n  };\n};\n\nexport const getIngredientsRequest = (): IGetIngredientsRequestAction => {\n  return {\n    type: GET_INGREDIENTS_REQUEST,\n  };\n};\n\nexport const getIngredientsSuccess = (\n  data: ReadonlyArray<TItem>\n): IGetIngredientsSuccessAction => {\n  return {\n    type: GET_INGREDIENTS_SUCCESS,\n    payload: data,\n  };\n};\n\nexport const getIngredientsFailed = (): IGetIngredientsFailedAction => {\n  return {\n    type: GET_INGREDIENTS_FAILED,\n  };\n};\n\nexport const setCart = (data: ReadonlyArray<TItem>): ISetCartAction => {\n  return {\n    type: SET_CART,\n    payload: data,\n  };\n};\n\nexport const resetCart = (): IResetCartAction => {\n  return {\n    type: RESET_CART,\n  };\n};\n\nexport const setIngredient = (data: TItem): ISetIngredientAction => {\n  return {\n    type: SET_INGREDIENT,\n    payload: data,\n  };\n};\n\nexport const removeIngredient = (): IRemoveIngredientAction => {\n  return {\n    type: REMOVE_INGREDIENT,\n  };\n};\n\nexport const addToCart = (data: TItem): IAddToCartAction => {\n  return {\n    type: ADD_TO_CART,\n    payload: data,\n  };\n};\n\nexport const removeFromCart = (data: number): IRemoveFromCartAction => {\n  return {\n    type: REMOVE_FROM_CART,\n    payload: data,\n  };\n};\n\nexport const orderRequest = (): IOrderRequestAction => {\n  return {\n    type: ORDER_REQUEST,\n  };\n};\n\nexport const orderSuccess = (data: string): IOrderSuccessAction => {\n  return {\n    type: ORDER_SUCCESS,\n    payload: data,\n  };\n};\n\nexport const orderFailed = (): IOrderFailedAction => {\n  return {\n    type: ORDER_FAILED,\n  };\n};\n\nexport const orderReset = (): IOrderResetAction => {\n  return {\n    type: ORDER_RESET,\n  };\n};\n\nexport const signIn = (data: TUserData): ISignInAction => {\n  return {\n    type: SIGN_IN,\n    payload: data,\n  };\n};\n\nexport const signOut = (): ISignOutAction => {\n  return {\n    type: SIGN_OUT,\n  };\n};\n\nexport const requestRecovery = (): IRequestRecoveryAction => {\n  return {\n    type: REQUEST_RECOVERY,\n  };\n};\n\nexport const recoverySuccess = (): IRecoverySuccessAction => {\n  return {\n    type: RECOVERY_SUCCESS,\n  };\n};\n\nexport const registrationSuccess = (): IRegistrationSuccessAction => {\n  return {\n    type: REGISTRATION_SUCCESS,\n  };\n};\n","import { unlockConstructor } from './index';\nimport { getCookie } from '../../utils/cookies';\nimport { URL } from '../../utils/data';\nimport {\n  getIngredientsFailed,\n  getIngredientsRequest,\n  getIngredientsSuccess,\n  lockConstructor,\n  orderFailed,\n  orderRequest,\n  orderSuccess,\n  resetCart,\n  setError,\n  setMessage,\n} from '.';\n\nimport { showNotification } from './app';\nimport type { AppDispatch, AppThunk, TItem, TOrder } from '../../types';\n\nexport const GET_INGREDIENTS_REQUEST: 'GET_INGREDENTS_REQUEST' =\n  'GET_INGREDENTS_REQUEST';\nexport const GET_INGREDIENTS_SUCCESS: 'GET_INGREDENTS_SUCCESS' =\n  'GET_INGREDENTS_SUCCESS';\nexport const GET_INGREDIENTS_FAILED: 'GET_INGREDENTS_FAILED' =\n  'GET_INGREDENTS_FAILED';\n\nexport const SET_CART: 'SET_CART' = 'SET_CART';\nexport const RESET_CART: 'RESET_CART' = 'RESET_CART';\n\nexport const SET_INGREDIENT: 'SET_INGREDIENT' = 'SET_INGREDIENT';\nexport const REMOVE_INGREDIENT: 'REMOVE_INGREDIENT' = 'REMOVE_INGREDIENT';\n\nexport const ADD_TO_CART: 'ADD_TO_CART' = 'ADD_TO_CART';\nexport const REMOVE_FROM_CART: 'REMOVE_FROM_CART' = 'REMOVE_FROM_CART';\n\nexport const ORDER_REQUEST: 'ORDER_REQUEST' = 'ORDER_REQUEST';\nexport const ORDER_SUCCESS: 'ORDER_SUCCESS' = 'ORDER_SUCCESS';\nexport const ORDER_FAILED: 'ORDER_FAILED' = 'ORDER_FAILED';\n\nexport const ORDER_RESET: 'ORDER_RESET' = 'ORDER_RESET';\n\nexport interface IGetIngredientsRequestAction {\n  readonly type: typeof GET_INGREDIENTS_REQUEST;\n}\n\nexport interface IGetIngredientsSuccessAction {\n  readonly type: typeof GET_INGREDIENTS_SUCCESS;\n  readonly payload: ReadonlyArray<TItem>;\n}\n\nexport interface IGetIngredientsFailedAction {\n  readonly type: typeof GET_INGREDIENTS_FAILED;\n}\n\nexport interface ISetCartAction {\n  readonly type: typeof SET_CART;\n  readonly payload: ReadonlyArray<TItem>;\n}\n\nexport interface IResetCartAction {\n  readonly type: typeof RESET_CART;\n}\n\nexport interface ISetIngredientAction {\n  readonly type: typeof SET_INGREDIENT;\n  readonly payload: TItem;\n}\n\nexport interface IRemoveIngredientAction {\n  readonly type: typeof REMOVE_INGREDIENT;\n}\n\nexport interface IAddToCartAction {\n  readonly type: typeof ADD_TO_CART;\n  readonly payload: TItem;\n}\n\nexport interface IRemoveFromCartAction {\n  readonly type: typeof REMOVE_FROM_CART;\n  readonly payload: number;\n}\n\nexport interface IOrderRequestAction {\n  readonly type: typeof ORDER_REQUEST;\n}\n\nexport interface IOrderResetAction {\n  readonly type: typeof ORDER_RESET;\n}\n\nexport interface IOrderSuccessAction {\n  readonly type: typeof ORDER_SUCCESS;\n  readonly payload: string;\n}\n\nexport interface IOrderFailedAction {\n  readonly type: typeof ORDER_FAILED;\n}\n\nexport type TIngredientActions =\n  | IGetIngredientsRequestAction\n  | IGetIngredientsSuccessAction\n  | IGetIngredientsFailedAction\n  | ISetCartAction\n  | IResetCartAction\n  | ISetIngredientAction\n  | IRemoveIngredientAction\n  | IAddToCartAction\n  | IRemoveFromCartAction\n  | IOrderRequestAction\n  | IOrderResetAction\n  | IOrderSuccessAction\n  | IOrderFailedAction;\n\nexport const getInredients: AppThunk = () => {\n  return (dispatch: AppDispatch) => {\n    dispatch(getIngredientsRequest());\n    fetch(`${URL}/ingredients`)\n      .then((response) => {\n        if (!response.ok) {\n          dispatch(setError());\n          dispatch(\n            setMessage(\n              `Что-то пошло не так, попробуйте позже! (${response.status})`\n            )\n          );\n          throw new Error(\n            `Что-то пошло не так, попробуйте позже! (${response.status})`\n          );\n        }\n        return response.json();\n      })\n      .then((data) => {\n        dispatch(getIngredientsSuccess(data.data));\n      })\n      .catch((err) => {\n        dispatch(getIngredientsFailed());\n        dispatch(setError());\n        dispatch(setMessage(`Что-то пошло не так, попробуйте позже!`));\n      });\n  };\n};\n\nexport const makeOrder: AppThunk = (data: TOrder) => {\n  return (dispatch: AppDispatch) => {\n    dispatch(orderRequest());\n    dispatch(\n      showNotification('Мы обрабатываем ваш заказ. Пожалуйста подождите!')\n    );\n    dispatch(lockConstructor());\n    fetch(`${URL}/orders`, {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: 'Bearer ' + getCookie('token'),\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => {\n        if (!response.ok) {\n          dispatch(orderFailed());\n          dispatch(\n            setMessage(\n              `Что-то пошло не так, попробуйте позже! (${response.status})`\n            )\n          );\n          throw new Error(\n            `Что-то пошло не так, попробуйте позже! (${response.status})`\n          );\n        }\n        return response.json();\n      })\n      .then((data) => {\n        dispatch(orderSuccess(data));\n        dispatch(resetCart());\n      })\n      .catch((err) => {\n        dispatch(orderFailed());\n      })\n      .finally(() => {\n        dispatch(unlockConstructor());\n      });\n  };\n};\n","import React from 'react';\nimport {\n  Logo,\n  BurgerIcon,\n  ListIcon,\n  ProfileIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './app-header.module.css';\nimport { NavLink } from 'react-router-dom';\nimport { Paths } from '../../utils/data';\n\nconst AppHeader = () => {\n  return (\n    <header className={'pt-4 pb-4 ' + styles.header}>\n      <div className={styles.wrapper + \" container\"}>\n        <nav className={'text text_type_main-default ' + styles.menu}>\n          <NavLink\n            className={'p-5 mr-2 ' + styles.button}\n            exact\n            to={Paths.HOME}\n            activeClassName={styles.active}\n          >\n            <BurgerIcon type='primary' />\n            <span>Конструктор</span>\n          </NavLink>\n          <NavLink className={'p-5 mr-2 ' + styles.button} exact to={Paths.FEED} activeClassName={styles.active}>\n            <ListIcon type='primary' />\n            <span>Лента заказов</span>\n          </NavLink>\n        </nav>\n        <div className={styles.logo}>\n          <NavLink to={Paths.HOME}>\n            <Logo />\n          </NavLink>\n        </div>\n        <nav className={'text text_type_main-default ' + styles.usermenu}>\n          <NavLink className={'p-5 ml-2 ' + styles.button} to={Paths.PROFILE} exact activeClassName={styles.active}>\n            <ProfileIcon type='primary' />\n            <span>Личный кабинет</span>\n          </NavLink>\n        </nav>\n      </div>\n    </header>\n  );\n}\n\nexport default AppHeader;\n","import React, {FC} from 'react';\n\ninterface IErrorMEssage {\n  message: string;\n}\n\nconst ErrorMessage: FC<IErrorMEssage> = ({message}) => {\n  return (\n    <section className=\"container\">\n      <p className=\"text text_type_main-default mt-5\">\n        {message}\n      </p>\n    </section>\n  );\n}\n\nexport default ErrorMessage;\n","import React, {FC} from 'react';\n\ninterface ILoaderSvg {\n  color: string;\n  size: number\n};\n\nexport const LoaderSvg: FC<ILoaderSvg> = ({ color = '#3C39EC', size }) => {\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 38 38\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      stroke={color}\n    >\n      <g fill=\"none\" fillRule=\"evenodd\">\n        <g transform=\"translate(1 1)\" strokeWidth=\"2\">\n          <circle strokeOpacity=\".5\" cx=\"18\" cy=\"18\" r=\"18\" />\n          <path d=\"M36 18c0-9.94-8.06-18-18-18\">\n            <animateTransform\n              attributeName=\"transform\"\n              type=\"rotate\"\n              from=\"0 18 18\"\n              to=\"360 18 18\"\n              dur=\"1s\"\n              repeatCount=\"indefinite\"\n            />\n          </path>\n        </g>\n      </g>\n    </svg>\n  );\n};","import React, {FC} from 'react';\n\nimport style from './loader.module.css';\nimport { LoaderSvg } from './loader.svg';\n\nconst loaderSizes = {\n  small: 16,\n  medium: 24,\n  large: 40\n};\n\ninterface ILoader {\n  size: 'small' | 'medium' | 'large';\n  inverse?: boolean;\n}\n\nexport const Loader: FC<ILoader> = ({ size, inverse = false }) => {\n  const loaderColor = inverse ? '#fff' : '#3C39EC';\n\n  const wrapperStyleKey = 'wrapper_' + size;\n  return (\n    <div className={style[wrapperStyleKey]}>\n      <LoaderSvg color={loaderColor} size={loaderSizes[size]} />\n    </div>\n  );\n};\n","import React, {FC} from 'react';\nimport styles from './notification.module.css';\nimport ReactDOM from 'react-dom';\nimport { useSelector, useDispatch } from '../../utils/hooks';\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport { setMessage } from '../../services/actions';\n\nconst notificationRoot = document.getElementById(\"react-notification\")!;\n\ninterface INatification {\n  message: string;\n}\n\nconst Notification: FC<INatification> = () => {\n  const message = useSelector(store => store.app.message);\n  const isActive = message.length > 0;\n  const dispatch = useDispatch();\n\n  const notificationHideHandler = () => {\n    dispatch(setMessage(''));\n  }\n\n  return ReactDOM.createPortal(\n    <section className={`${styles.notification} text text_type_main-default ${isActive ? styles.active : ''}`}>\n      <div className={\"container \" + styles.container}>{message}</div>\n      <button type='button' className={styles.closeBtn} onClick={notificationHideHandler}>\n        <CloseIcon type='primary' />\n      </button>\n    </section>, \n    notificationRoot\n  );\n}\n\nexport default Notification;\n","import React, {FC} from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from '../utils/hooks';\nimport AppHeader from '../components/app-header/app-header';\nimport ErrorMessage from '../components/error-message/error-message';\nimport { Loader } from '../components/loader/loader';\nimport Notification from '../components/notification/notification';\n\nconst Layout: FC = ({children}) => {\n  const {error, message, loader} = useSelector(store => store.app);\n\n  return (\n    <>\n      <div className={'screen pb-10'}>\n        <AppHeader />\n        <main>\n          {\n            error ? \n              <ErrorMessage message={message} /> \n              : loader ? <div className=\"mt-20\">\n                <Loader size='large' /> \n              </div>\n                : children\n          }\n        </main>\n      </div>\n      <Notification message={message} />\n    </>\n  );\n}\n\nLayout.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node\n  ]).isRequired\n};\n\nexport default Layout;\n","import React, {FC} from 'react';\nimport styles from './ingredient.module.css';\nimport { Counter, CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport {useDispatch, useSelector} from '../../utils/hooks';\nimport {useDrag} from 'react-dnd';\nimport {useHistory, useLocation, Link} from 'react-router-dom';\nimport { Paths } from '../../utils/data';\nimport { setIngredient } from '../../services/actions';\nimport { TItem } from '../../types';\n\ninterface IIngredient {\n  item: TItem;\n}\n\nconst Ingredient: FC<IIngredient> = ({item}) => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n\n  const cart = useSelector(store => store.ingredient.cart);\n\n  const [, ingRef] = useDrag({\n    type: 'ingredient',\n    item,\n  });\n\n  let amount = cart.filter((cartItem: TItem) => cartItem._id === item._id).length;\n  amount = item.type === 'bun' && amount > 0 ? 2 : amount;\n\n  const ingredientClickHandler = () => {\n    dispatch(setIngredient(item));\n    history.replace({ pathname: `${Paths.INGREDIENTS}/${item._id}`, state: { from: Paths.HOME } });\n  }\n\n  return (\n    <Link to={{pathname: `${Paths.INGREDIENTS}/${item._id}`, state: {background: location, modal: 'ingredient'}}} className={styles.ingredient + ' pl-4 pr-4'} onClick={ingredientClickHandler} ref={ingRef}>\n      {(amount > 0) && <Counter count={amount} size=\"default\" />}\n      <img src={item.image} alt={item.name} />\n      <div className={styles.price + ' text text_type_digits-default mt-1 mb-1'}>\n        {item.price.toLocaleString('ru-RU')}\n        <CurrencyIcon type=\"primary\" />\n      </div>\n      <h4 className=\"text text_type_main-default\">{item.name}</h4>\n      \n    </Link>\n  );\n}\n\nexport default Ingredient;\n","import React, {useState, useEffect} from 'react';\nimport { Tab } from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './burger-ingredients.module.css';\nimport Ingredient from '../ingredient/ingredient';\nimport {useSelector} from '../../utils/hooks';\nimport { Loader } from '../loader/loader';\nimport { TItem, TItemType, TTab } from '../../types';\n\nconst tabs: Array<TTab> = [{id: 'bun', title: 'Булки'}, {id: 'sauce', title: 'Соусы'},{id: 'main', title: 'Начинки'}];\n\nconst BurgerIngredients = () => {\n  const [current, setCurrent] = useState<string>('bun');\n  const [tabClick, setTabClick] = useState<boolean>(false);\n\n  const list = useSelector(store => store.ingredient.list);\n  const isLoading = useSelector(store => store.ingredient.ingredientsRequest);\n\n  const tabClickHandler = (value: string) => {\n    setTabClick(true);\n    setCurrent(value);\n    setTimeout(() => {\n      setTabClick(false);\n    }, 1000);\n  };\n\n  useEffect(() => {\n    const container = document.querySelector(`.${styles['tab-content']}`)!;\n    const controls = document.querySelector(`.${styles['tab-controls']}`)!;\n    const headings = container.querySelectorAll('h3')!;\n    \n    const border = controls.getBoundingClientRect().bottom;\n    \n    const scrollHandler = () => {\n      const distances: number[] = [];\n\n      headings.forEach((heading, i) => {\n        const coords = heading.getBoundingClientRect();\n        distances[i] = Math.abs(border - coords.top);\n      })\n\n      const currentMinDistance = Math.min(...distances);\n\n      distances.forEach((distance, i) => {\n        if (distance === currentMinDistance && !tabClick) {\n          setCurrent(headings[i].id);\n        }\n      })\n    };\n\n    if (list.length > 0) {\n      container.addEventListener('scroll', scrollHandler);\n    }\n    \n    return () => {\n      container.removeEventListener('scroll', scrollHandler);\n    };\n  }, [list, tabClick]);\n\n  useEffect(() => {\n    const target = document.querySelector(`#${current}`)!;\n    target.scrollIntoView({behavior: 'smooth'});\n\n  }, [current]);\n  \n  const filteredList: {[key in TItemType]: Array<TItem>} = {bun: [], sauce: [], main: []};\n\n  tabs.forEach((tab) => {\n    filteredList[tab.id] = list.filter((item: TItem) => item.type === tab.id);\n  });\n\n  return (\n    <>\n      <section className={'mr-10 pt-10 ' + styles.ingredients}>\n        <h2 className=\"text text_type_main-large mb-5\">Соберите бургер</h2>\n        <div className={'mb-10 ' + styles['tab-controls']}>\n          {tabs.map(tabItem => (\n            <Tab key={tabItem.id} value={tabItem.id} active={current === tabItem.id} onClick={tabClickHandler}>\n              {tabItem.title}\n            </Tab>\n          ))}\n        </div>\n        {isLoading ? \n          <Loader size='large'/> : \n          <div className={styles['tab-content'] + ' custom-scroll'}>\n            {tabs.map(tabItem => (\n              <React.Fragment key={tabItem.id}>\n                <h3 className=\"text text_type_main-medium mb-6\" id={tabItem.id}>{tabItem.title}</h3>\n                <ul className={styles.list + ' mb-10 pl-4 pr-4'}>\n                  {filteredList[tabItem.id].map(element => {\n                    return (\n                      <li  key={element['_id']} className={styles.item + ' mr-6 mb-10'}>\n                        <Ingredient item={element} />\n                      </li>\n                    )\n                  }\n                  )}\n                </ul>\n              </React.Fragment>\n            ))}\n          </div>\n        }\n      </section>      \n    </>\n  );\n};\n\nexport default BurgerIngredients;\n","import React, {FC} from 'react';\nimport styles from './modal-overlay.module.css';\n\ninterface IModalOverlay {\n  onClick: () => void;\n};\n\nconst ModalOverlay: FC<IModalOverlay> = ({onClick}) => {\n  return (\n    <div className={styles.overlay} onClick={onClick} />\n  );\n}\n\nexport default ModalOverlay;\n","import React, {FC, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport styles from './modal.module.css';\nimport { CloseIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport ModalOverlay from '../modal-overlay/modal-overlay';\nimport { useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from '../../utils/hooks';\nimport { setIngredient } from '../../services/actions';\nimport { TItem } from '../../types';\n\nconst modalRoot = document.getElementById(\"react-modals\")!;\n\ninterface IModal {\n  onClose: () => void;\n  heading?: string;\n};\n\nconst Modal: FC<IModal> = ({onClose, heading, children}) => {\n  const {id} = useParams<{id: string}>();\n  const dispatch = useDispatch();\n  const list = useSelector(store => store.ingredient.list);\n  const item = list.find((ing: TItem) => ing._id === id);\n  const ingredientsLoaded = useSelector(store => store.ingredient.ingredientsLoaded);\n\n  useEffect(() => {\n    if (ingredientsLoaded && item) {\n      dispatch(setIngredient(item))\n    }\n  }, [dispatch, item, ingredientsLoaded]);\n\n  const escPressHandler = React.useCallback((evt) => {\n    if (evt.key === 'Escape') {\n      onClose();\n    }\n  }, [onClose]);\n\n  useEffect(() => {\n    document.addEventListener('keydown', escPressHandler);\n    return () => {\n      document.removeEventListener('keydown', escPressHandler);\n    };\n  }, [escPressHandler]);\n  return ReactDOM.createPortal(\n    <section className={styles.modal}>\n      <ModalOverlay onClick={onClose} />\n      <div className={styles.content + \" pl-10 pt-10 pr-10 pb-15\"}>\n        <button className={styles.closeBtn} type=\"button\" onClick={onClose}>\n          <CloseIcon type=\"primary\" />\n        </button>\n        {heading && <h2 className={styles.heading + \"  text text_type_main-large\"}>{heading}</h2>}\n        {children}\n      </div>\n    </section>, modalRoot\n  );\n}\n\nexport default Modal;\n","export default __webpack_public_path__ + \"static/media/tick.887b83be.gif\";","import React, {FC} from 'react';\nimport styles from './order-details.module.css';\nimport tickImage from '../../images/tick.gif';\n\ninterface IOrderDetails {\n  id: number;\n}\n\nconst OrderDetails: FC<IOrderDetails> = ({id}) => {\n  return (\n    <div className={styles[\"order-details\"] + ' pt-20 pb-15 pl-15 pr-15'}>\n      <h2 className=\"text text_type_digits-large mb-8\">{id}</h2>\n      <span className=\"text text_type_main-medium mb-15\">идентификатор заказа</span>\n      <img className={styles.image} src={tickImage} alt=\"ok\"></img>\n      <span className=\"text text_type_main-default mt-15 mb-2\">Ваш заказ начали готовить</span>\n      <span className={styles['footer-text'] + \" text text_type_main-default\"}>Дождитесь готовности на орбитальной станции</span>\n    </div>\n  );\n}\n\nexport default OrderDetails;\n","import React, {FC} from 'react';\nimport {useDispatch} from '../../utils/hooks';\nimport styles from './burger-part.module.css';\nimport {\n  ConstructorElement,\n  DragIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport {useDrag, useDrop} from 'react-dnd';\nimport { removeFromCart } from '../../services/actions';\nimport { TItem } from '../../types';\n\ninterface IBurgerPart {\n  index: number;\n  ingredient: TItem;\n  onMove: (oldIndex: number, newIndex: number) => void;\n  findIndex: (item: TItem) => number\n};\n\nconst BurgerPart: FC<IBurgerPart> = ({index, ingredient, onMove, findIndex}) => {\n  const dispatch = useDispatch();\n\n  const ingredientRemoveHandler = (index: number) => {\n    dispatch(removeFromCart(index));\n  };\n\n  const [, drag] = useDrag(() => ({\n    type: 'burger-part',\n    item: ingredient,\n    end: (item, monitor) => {\n      const didDrop = monitor.didDrop();\n      if (!didDrop) {\n        onMove(index, index);\n      }\n    }\n  }), [index, onMove]);\n\n  const [, drop] = useDrop(() => ({\n    accept: 'burger-part',\n    canDrop: () => false,\n    hover(item: TItem, monitor) {\n      const dragIndex = findIndex(item);\n      onMove(dragIndex, index);\n    }\n  }), [findIndex, onMove]);\n\n  return (\n    <li className={styles.item + ' mb-4'} ref={(node) => drag(drop(node))}>\n      <button className={styles.btn + \" mr-4\"}>\n        <DragIcon type=\"primary\" />\n      </button>\n      <ConstructorElement text={ingredient.name} price={ingredient.price} thumbnail={ingredient.image} handleClose={() => {ingredientRemoveHandler(index)}}/>\n    </li>  );\n}\n\nexport default BurgerPart;\n","import {\n  ConstructorElement,\n  CurrencyIcon,\n  Button\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport React from 'react';\nimport styles from './burger-constructor.module.css';\nimport {useDispatch, useSelector} from '../../utils/hooks';\nimport { makeOrder } from '../../services/actions/ingredient';\nimport Modal from '../modal/modal';\nimport OrderDetails from '../order-details/order-details';\nimport Notification from '../notification/notification';\nimport { useDrop } from 'react-dnd';\nimport { showNotification } from '../../services/actions/app';\nimport BurgerPart from '../burger-part/burger-part';\nimport { useHistory } from 'react-router-dom';\nimport { Paths } from '../../utils/data';\nimport { addToCart, orderReset, setCart } from '../../services/actions';\nimport { TItem } from '../../types';\nimport { Loader } from '../loader/loader';\n\nconst BurgerConstructor = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const {cart, order} = useSelector((store: any) => store.ingredient);\n  // const cart: string[] = useSelector(store => store.ingredient.cart);\n  const isAuthorized = useSelector(store => store.user.isAuthorized);\n  const {message: notification, locked} = useSelector(store => store.app);\n\n  const [, dropTarget] = useDrop({\n    accept: 'ingredient',\n    drop(item: TItem) {\n      dispatch(addToCart(item));\n      if (item.type === 'bun' && cart.findIndex((item: TItem) => item.type === 'bun') >= 0) {\n        dispatch(showNotification('В бургере может быть только один вид булок! Мы обновили ваш выбор.'));\n      }\n    }\n  })\n\n  const [,partDropTarget] = useDrop({\n    accept: 'burger-part',\n  });\n\n  const bun = cart.find((el: TItem) => el.type === 'bun');\n  const totalAmount = cart.reduce((acc: number, ingredient: TItem) => acc + ingredient.price, bun ? bun.price : 0);\n\n  const onOrder = () => {\n    const data = { ingredients: cart.map((item: TItem) => item._id) };\n    const bunIndex = cart.findIndex((item: TItem) => item.type === 'bun');\n    const burgerInner = cart.filter((item: TItem) => item.type !== 'bun');\n\n    if (bunIndex >= 0 && burgerInner.length > 0 && isAuthorized) {\n      dispatch(makeOrder(data));\n    } \n    if (!isAuthorized) {\n      history.replace({ pathname: Paths.LOGIN, state: { from: Paths.HOME } });\n    }\n    if (bunIndex < 0) {\n      dispatch(showNotification('Не бывает бургеров без булки! Выберите булку!'));\n    }\n    if (burgerInner.length === 0) {\n      dispatch(showNotification('Вы забыли выбрать начинку!'))\n    }\n  } \n\n  const orderCloseHandler = () => {\n    dispatch(orderReset());\n  };\n\n  const partMoveHandler = (oldIndex: number, newIndex: number) => {\n    const newCart = [...cart];\n    [newCart[oldIndex], newCart[newIndex]] = [newCart[newIndex], newCart[oldIndex]];\n    dispatch(setCart(newCart));\n  }\n\n  const findIndex = (ingredient: TItem) => cart.findIndex((item: TItem) => item._id === ingredient._id);\n  const lockStyle = locked ? styles.locked : '';\n\n  return (\n    <>\n      <section className={styles.constructor + ' pt-25 ' + lockStyle} ref={dropTarget}>\n        {cart.length === 0 ? <p className={\"text text_type_main-medium \" + styles.empty}>Перетащите ингридиенты<br/>в эту область</p> : <>\n          <div className={styles.top + ' ml-10 mb-4 pl-4'}>{bun &&<ConstructorElement type=\"top\" isLocked={true} text={bun.name + ' (верх)'} price={bun.price} thumbnail={bun.image}/>}</div>\n          <ul className={styles.content + ' mb-4 custom-scroll pl-4 pr-1'} ref={partDropTarget}>\n            {\n              cart.map((el: TItem, i: number) => el.type === 'bun' ? null : <BurgerPart key={i} index={i} ingredient={el} onMove={partMoveHandler} findIndex={findIndex}/>)\n            }\n          </ul>\n          <div className={styles.bottom + ' ml-10 mb-10 pl-4'}>\n            {bun && <ConstructorElement type=\"bottom\" isLocked={true} text={bun.name + ' (низ)'} price={bun.price} thumbnail={bun.image}/>}\n          </div>\n          <div className={styles.summary}>\n            <span className={styles.value + \" text text_type_digits-medium mr-10\"}>\n              {totalAmount.toLocaleString('ru-RU')}\n              <CurrencyIcon type=\"primary\" />\n            </span>\n            <Button type=\"primary\" size=\"large\" onClick={onOrder}>\n              {locked ? <Loader size='small' inverse/> : 'Оформить заказ'}\n            </Button>\n          </div>\n        </>}\n      </section>\n      {order.success && (\n        <Modal onClose={orderCloseHandler}>\n          <OrderDetails id={order.order.number} />\n        </Modal>\n      )}\n      <Notification message={notification} />\n    </>\n  );\n};\n\nexport default BurgerConstructor;\n","import React from 'react';\nimport Layout from './layout';\nimport {DndProvider} from 'react-dnd';\nimport {HTML5Backend} from 'react-dnd-html5-backend';\n\nimport BurgerIngredients from '../components/burger-ingredients/burger-ingredients';\nimport BurgerConstructor from '../components/burger-constructor/burger-constructor';\n\nconst HomePage = () => {  \n  return (\n    <Layout>\n      <div className={'wrapper container'}>\n        <DndProvider backend={HTML5Backend}>\n          <BurgerIngredients />\n          <BurgerConstructor />\n        </DndProvider>\n      </div>\n    </Layout>\n  );\n}\n\nexport default HomePage;\n","import React, {FormEvent, useState} from 'react';\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './forms.module.css';\nimport { Link, Redirect } from 'react-router-dom';\nimport Layout from './layout';\nimport { Paths } from '../utils/data';\nimport { useDispatch, useSelector } from '../utils/hooks';\nimport { showNotification } from '../services/actions/app';\nimport { requestPasswordRecovery } from '../services/actions/user';\n\nconst ForgotPasswordPage = () => {\n  const [mail, setMail] = useState('');\n  const dispatch = useDispatch();\n  const requested = useSelector(store => store.user.recoveryRequested);\n  const isAuthorized = useSelector(store => store.user.isAuthorized);\n\n  if (isAuthorized) {\n    return (\n      <Redirect to={{pathname: Paths.HOME}} />\n    )\n  };\n\n  const formSubmitHandler = (evt: FormEvent) => {\n    evt.preventDefault();\n    if (mail.trim() === '') {\n      dispatch(showNotification('Заполните все поля!'))\n    } else {\n      dispatch(requestPasswordRecovery(mail))\n    }\n  };\n\n  if (requested) {\n    return (\n      <Redirect to={{pathname: Paths.RESET}} />\n    )\n  }\n\n  return (\n    <Layout>\n      <section className={styles.login}>\n        <div className={\"mb-20 \" + styles.form}>\n          <h2 className={\"text text_type_main-medium mb-6 \" + styles.heading}>Восстановление пароля</h2>\n          <form className=\"mb-20\" onSubmit={formSubmitHandler}>\n            <Input \n              type={'email'} \n              name='mail'\n              value={mail}\n              onChange={evt => setMail(evt.target.value)}\n              placeholder={'Укажите e-mail'}\n            />\n            <Button type=\"primary\" size=\"medium\">\n              Восстановить\n            </Button>\n          </form>\n          <div className={\"text text_type_main-default \" + styles.actions}>\n            <div className=\"mb-4\">\n              <span>Вспомнили пароль? </span>\n              <Link to={Paths.LOGIN}>\n                Войти\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import React from 'react';\nimport styles from './ingredient-details.module.css';\nimport {useSelector} from '../../utils/hooks';\n\nconst IngredientDetails = () => {\n  const item = useSelector((store: any) => store.ingredient.currentIngredient);\n\n  return (\n    <div className={styles.details}>\n      <img className={styles.image + ' mb-4'} src={item.image_large} alt=\"изображение ингредиента\" />\n      <span className='text text_type_main-medium mb-8'>\n        {item.name}\n      </span>\n      <ul className={styles.info + ' text text_type_main-default'}>\n        <li className={styles['info-item'] + ' mr-5'}>\n          <span>Калории,ккал</span>\n          <span>{item.calories}</span>\n        </li>\n        <li className={styles['info-item'] + ' mr-5'}>\n          <span>Белки, г</span>\n          <span>{item.proteins}</span>\n        </li>\n        <li className={styles['info-item'] + ' mr-5'}>\n          <span>Жиры, г</span>\n          <span>{item.fat}</span>\n        </li>\n        <li className={styles['info-item']}>\n          <span>Углеводы, г</span>\n          <span>{item.carbohydrates}</span>\n        </li>\n      </ul>\n    </div>\n  );\n}\n\nexport default IngredientDetails;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport { Paths } from '../../utils/data';\nimport styles from './page-404.module.css';\n\nconst Page404 = () => {\n  return (\n    <section className={\"container mt-20 \" + styles.container}>\n      <p className=\"text text_type_digits-large mb-10\">404</p>\n      <p className=\"text text_type_main-medium mb-10\">Запрошенной вами страницы не существует!</p>\n      <Link to={Paths.HOME} className={\"text text_type_main-medium \" + styles.link}>На главную</Link>\n    </section>\n  );\n}\n\nexport default Page404;\n","import React, {useEffect} from 'react';\nimport { useDispatch, useSelector } from '../utils/hooks';\nimport { useParams } from 'react-router-dom';\nimport IngredientDetails from '../components/ingredient-details/ingredient-details';\nimport Page404 from '../components/page-404/page-404';\nimport { setIngredient } from '../services/actions';\nimport { TItem } from '../types';\nimport Layout from './layout';\n\nconst IngredientPage = () => {\n  const {id} = useParams<{id: string}>();\n  const item = useSelector(store => store.ingredient.list.find((ing: TItem) => ing._id === id));\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (item) {\n      dispatch(setIngredient(item))\n    }\n  }, [item, dispatch]);\n\n  return (\n    <Layout>\n      <div className=\"mt-20\">\n        {item ? <IngredientDetails /> : <Page404 />}\n      </div>\n    </Layout>\n  );\n}\n\nexport default IngredientPage;\n","import React, {ChangeEvent, FormEvent, useState} from 'react';\nimport Layout from './layout';\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './forms.module.css';\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport { Paths } from '../utils/data';\nimport { useDispatch, useSelector } from '../utils/hooks';\nimport { showNotification } from '../services/actions/app';\nimport { makeSignIn } from '../services/actions/user';\nimport { History } from 'history';\nimport { TLocation } from '../types';\n\nconst LoginPage = () => {\n  const isAuthorized = useSelector(store => store.user.isAuthorized);\n  const history = useHistory<History & {from: {pathname: string}, oldState: TLocation}>();\n\n  const [form, setForm] = useState({\n    email: '',\n    password: ''\n  });\n\n  const dispatch = useDispatch();\n\n  const formChangeHandler = (evt: ChangeEvent<HTMLInputElement>) => {\n    setForm(prevForm => ({...prevForm, [evt.target.name]: evt.target.value}));\n  };\n\n  const submitHandler = (evt: FormEvent) => {\n    evt.preventDefault();\n    if (form.email.trim() === '' || form.password.trim() === '') {\n      dispatch(showNotification('Заполните все поля!'))\n    } else {\n      dispatch(makeSignIn(form));\n    }\n  }\n\n  if (isAuthorized) {\n    return (\n      <Redirect to={{pathname: history.location.state?.from.pathname || Paths.HOME, state: history.location.state.oldState}} />\n    )\n  };\n\n  return (\n    <Layout>\n      <section className={styles.login}>\n        <div className={\"mb-20 \" + styles.form}>\n          <h2 className={\"text text_type_main-medium mb-6 \" + styles.heading}>Вход</h2>\n          <form className=\"mb-20\" onSubmit={submitHandler}>\n            <Input \n              type={'email'} \n              placeholder={'E-mail'}\n              name='email'\n              value={form.email}\n              onChange={formChangeHandler}\n            />\n            <Input \n              type={'password'} \n              placeholder={'Пароль'}\n              icon={'ShowIcon'}\n              name='password'\n              value={form.password}\n              onChange={formChangeHandler}\n            />\n            <Button type=\"primary\" size=\"medium\">\n              Войти\n            </Button>\n          </form>\n          <div className={\"text text_type_main-default \" + styles.actions}>\n            <div className=\"mb-4\">\n              <span>Вы - новый пользователь? </span>\n              <Link to={Paths.REGISTER}>\n                Зарегистрироваться\n              </Link>\n            </div>\n            <div>\n              <span>Забыли пароль? </span>\n              <Link to={Paths.FORGOT}>\n                Восстановить пароль\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n\nexport default LoginPage;\n","import React, {FC} from 'react';\nimport styles from './ingredients.module.css';\n\ninterface IIngredients {\n  list: string[];\n};\n\nconst Ingredients: FC<IIngredients> = ({list}) => {\n  let listContent;\n  if (list.length <= 6) {\n    listContent = list.map((item, i) => {\n      return (\n        <li className={styles.item} style={{zIndex: 6-i}} key={i}>\n          <img src={item} alt=\"Ингредиент бургера\" />\n        </li>\n      )\n    })\n  } else {\n    listContent = list.slice(0, 6).map((item, i) => {\n      return (\n        i === 5 ?  <li className={styles.item + \" \" + styles.withextra} style={{zIndex: 6-i}} key={i}>\n        <img src={item} alt=\"Ингредиент бургера\" />\n        <span className={styles.extra + \" text text_type_main-default\"}>+{list.length - 5}</span>\n      </li> : <li className={styles.item} style={{zIndex: 6-i}} key={i}>\n          <img src={item} alt=\"Ингредиент бургера\" />\n        </li>\n      )\n    })\n  }\n\n  return (\n    <ul className={styles.list}>\n      {listContent}\n    </ul>\n  )\n} \n  <li className={styles.item}></li>\nexport default Ingredients;\n","const formatDate = (date: Date): string => {\n  let string = '';\n  const HOUR = 1000 * 60 * 60;\n  const now = new Date();\n  \n  const Days = {\n    'Сегодня': now.getDate(),\n    'Вчера': new Date(+now - 24 * HOUR).getDate(),\n    '2 дня назад': new Date(+now - 2 * 24 * HOUR).getDate()\n  };\n\n  const in3days = +now - +date < HOUR * 24 * 2;\n\n  if (in3days) {\n    for (const day in Days) {\n      //@ts-ignore\n      if (Days[day] === date.getDate()) {\n        string+=day;\n      }\n    }\n  } else {\n    string+= date.toLocaleDateString('ru-RU', {month: 'long', day: 'numeric'});\n  }\n  \n  string+=`, ${date.toLocaleTimeString('ru-RU', {hour: 'numeric', minute: 'numeric'})} i-GMT+3`;  \n  return string;\n}\n\nexport {formatDate};","import React, { FC } from 'react';\nimport { useSelector } from '../../utils/hooks';\nimport { TFeedItem } from '../../types';\nimport styles from './feed-item.module.css';\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport Ingredients from '../ingredients/ingredients';\nimport {Link, useLocation} from 'react-router-dom';\n// import { Paths } from '../../utils/data';\nimport { formatDate } from '../../utils/date';\nimport { Status } from '../../utils/data';\n\ninterface IFeedItem {\n  order: TFeedItem;\n  showStatus? : boolean;\n}\n\nconst FeedItem: FC<IFeedItem> = ({ order, showStatus }) => {\n  const date = new Date(order.createdAt);\n  const { list } = useSelector((store) => store.ingredient);\n  const location = useLocation();\n\n  \n\n  const getPrice = (burger: string[]) => {\n    return burger.reduce((acc: number, id: string) => {\n      const item = list.find((ing) => ing._id === id);\n      return (acc += item\n        ? item.type === 'bun'\n          ? item.price * 2\n          : item.price\n        : 0);\n    }, 0);\n  };\n\n  const getPictures = (burger: string[]) => {\n    const pictures: string[] = [];\n    burger.forEach(id => {\n      const curIng = list.find(ingredient => ingredient._id === id);\n      if (curIng) {\n        pictures.push(curIng.image);\n      }\n    });    \n    return pictures;\n  }\n\n  return (\n    <article className={styles.feedItem + ' p-6 mb-6'}>\n      <Link to={{pathname: `${location.pathname}/${order._id}`, state: {background: location, modal: 'order', from: location.pathname}}}>\n        <div className={styles.header + ' mb-6'}>\n          <span className=\"text text_type_digits-default\">#{order.number}</span>\n          <span className={styles.date + \" text text_type_main-default\"}>\n            {formatDate(date)}\n          </span>\n        </div>\n        <h3 className=\"text text_type_main-medium mb-2\">{order.name}</h3>\n        {showStatus && <div className=\"text text_type_main-default\">{Status[order.status]}</div>}\n        <div className={styles.footer + \" mt-6\"}>\n          <Ingredients list={getPictures(order.ingredients)} />\n          <div className={styles.price + \" text text_type_digits-default\"}>{getPrice(order.ingredients).toLocaleString('ru-RU')} <CurrencyIcon type='primary'/></div>\n        </div>\n      </Link>\n    </article>\n  );\n};\n\nexport default FeedItem;\n","export const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\nexport const WS_CONNECTION_CLOSE: 'WS_CONNECTION_CLOSE' = 'WS_CONNECTION_CLOSE';\n\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' =\n'WS_CONNECTION_SUCCESS';\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' =\n'WS_CONNECTION_CLOSED';\nexport const WS_GET_MESSAGE: 'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\n\nexport const WS_CONNECTION_AUTH_START: 'WS_CONNECTION_AUTH_START' = 'WS_CONNECTION_AUTH_START';\nexport const WS_CONNECTION_AUTH_CLOSE: 'WS_CONNECTION_AUTH_CLOSE' = 'WS_CONNECTION_AUTH_CLOSE';\n\nexport const WS_CONNECTION_AUTH_SUCCESS: 'WS_CONNECTION_AUTH_SUCCESS' =\n'WS_CONNECTION_AUTH_SUCCESS';\nexport const WS_CONNECTION_AUTH_ERROR: 'WS_CONNECTION_AUTH_ERROR' = 'WS_CONNECTION_AUTH_ERROR';\nexport const WS_CONNECTION_AUTH_CLOSED: 'WS_CONNECTION_AUTH_CLOSED' =\n'WS_CONNECTION_AUTH_CLOSED';\nexport const WS_GET_AUTH_MESSAGE: 'WS_GET_AUTH_MESSAGE' = 'WS_GET_AUTH_MESSAGE';\n\ninterface IWSConnectionStartAction {\n  readonly type: typeof WS_CONNECTION_START;\n  readonly payload: string;\n}\n\ninterface IWSConnectionCloseAction {\n  readonly type: typeof WS_CONNECTION_CLOSE;\n}\n\ninterface IWSConnectionSuccessAction {\n  readonly type: typeof WS_CONNECTION_SUCCESS;\n}\n\ninterface IWSConnectionErrorAction {\n  readonly type: typeof WS_CONNECTION_ERROR;\n}\n\ninterface IWSConnectionClosedAction {\n  readonly type: typeof WS_CONNECTION_CLOSED;\n}\n\ninterface IWSGetMessageAction {\n  readonly type: typeof WS_GET_MESSAGE;\n  readonly payload: any;\n}\n\ninterface IWSConnectionAuthStartAction {\n  readonly type: typeof WS_CONNECTION_AUTH_START;\n  readonly payload: string;\n}\n\ninterface IWSConnectionAuthCloseAction {\n  readonly type: typeof WS_CONNECTION_AUTH_CLOSE;\n}\n\ninterface IWSConnectionAuthSuccessAction {\n  readonly type: typeof WS_CONNECTION_AUTH_SUCCESS;\n}\n\ninterface IWSConnectionAuthErrorAction {\n  readonly type: typeof WS_CONNECTION_AUTH_ERROR;\n}\n\ninterface IWSConnectionAuthClosedAction {\n  readonly type: typeof WS_CONNECTION_AUTH_CLOSED;\n}\n\ninterface IWSGetAuthMessageAction {\n  readonly type: typeof WS_GET_AUTH_MESSAGE;\n  readonly payload: any;\n}\n\nexport const wsConnectionStart = (url: string): IWSConnectionStartAction => {  \n  return {\n    type: WS_CONNECTION_START,\n    payload: url,\n  };\n};\n\nexport const wsConnectionClose = (): IWSConnectionCloseAction => {  \n  return {\n    type: WS_CONNECTION_CLOSE,\n  };\n};\n\nexport const wsConnectionSuccess = (): IWSConnectionSuccessAction => {\n  return {\n    type: WS_CONNECTION_SUCCESS,\n  };\n};\n\nexport const wsConnectionError = (): IWSConnectionErrorAction => {\n  return {\n    type: WS_CONNECTION_ERROR,\n  };\n};\n\nexport const wsConnectionClosed = (): IWSConnectionClosedAction => {\n  return {\n    type: WS_CONNECTION_CLOSED,\n  };\n};\n\nexport const wsGetMessage = (message: any): IWSGetMessageAction => {\n  return {\n    type: WS_GET_MESSAGE,\n    payload: message,\n  };\n};\n\nexport const wsConnectionAuthStart = (url: string): IWSConnectionAuthStartAction => {  \n  return {\n    type: WS_CONNECTION_AUTH_START,\n    payload: url,\n  };\n};\n\nexport const wsConnectionAuthClose = (): IWSConnectionAuthCloseAction => {  \n  return {\n    type: WS_CONNECTION_AUTH_CLOSE,\n  };\n};\n\nexport const wsConnectionAuthSuccess = (): IWSConnectionAuthSuccessAction => {\n  return {\n    type: WS_CONNECTION_AUTH_SUCCESS,\n  };\n};\n\nexport const wsConnectionAuthError = (): IWSConnectionAuthErrorAction => {\n  return {\n    type: WS_CONNECTION_AUTH_ERROR,\n  };\n};\n\nexport const wsConnectionAuthClosed = (): IWSConnectionAuthClosedAction => {\n  return {\n    type: WS_CONNECTION_AUTH_CLOSED,\n  };\n};\n\nexport const wsGetAuthMessage = (message: any): IWSGetAuthMessageAction => {\n  return {\n    type: WS_GET_AUTH_MESSAGE,\n    payload: message,\n  };\n};\n\nexport type TWSActions =\n  | IWSConnectionStartAction\n  | IWSConnectionCloseAction\n  | IWSConnectionSuccessAction\n  | IWSConnectionClosedAction\n  | IWSConnectionErrorAction\n  | IWSGetMessageAction\n  | IWSConnectionAuthStartAction\n  | IWSConnectionAuthSuccessAction\n  | IWSConnectionAuthClosedAction\n  | IWSConnectionAuthErrorAction\n  | IWSGetAuthMessageAction;\n","import React, { ChangeEvent, useState, useEffect, useCallback } from 'react';\nimport Layout from './layout';\nimport {\n  Button,\n  Input,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './profile.module.css';\nimport { NavLink, useRouteMatch } from 'react-router-dom';\nimport { Paths, WS_URL } from '../utils/data';\nimport { useDispatch, useSelector } from '../utils/hooks';\nimport { makeSignOut, updateUser } from '../services/actions/user';\nimport FeedItem from '../components/feed-item/feed-item';\nimport { TFeedItem } from '../types';\nimport { wsConnectionAuthClose, wsConnectionAuthStart } from '../services/actions/web-socket';\nimport { getCookie } from '../utils/cookies';\nimport { Loader } from '../components/loader/loader';\n\nconst ProfilePage = () => {\n  const [nameDisabled, setNameDisabled] = useState(true);\n  const [mailDisabled, setMailDisabled] = useState(true);\n  const [passwordDisabled, setPasswordDisabled] = useState(true);\n  const { user } = useSelector(store => store);\n  const {orders} = useSelector(store => store.ws.orderHistory);\n  const {wsAuthConnected} = useSelector(store => store.ws);\n\n  const dispatch = useDispatch();\n  const match = useRouteMatch(Paths.ORDERS);\n\n  const sortedOrders = orders && orders.length && orders.sort((a:TFeedItem, b: TFeedItem) => +new Date(b.createdAt) - +new Date(a.createdAt));\n\n  const initialState = {\n    name: user.name,\n    email: user.email,\n    password: user.password,\n    isTouched: false,\n  };\n\n  const [form, setForm] = useState(initialState);\n\n  const formChangeHandler = (evt: ChangeEvent<HTMLInputElement>) => {\n    setForm((prevForm) => ({\n      ...prevForm,\n      [evt.target.name]: evt.target.value,\n      isTouched: true,\n    }));\n  };\n\n  const saveChangesHandler = () => {\n    dispatch(updateUser({ \n      name: form.name,\n      email: form.email,\n      password: form.password,\n    }));\n    setForm(prevState => ({...prevState, isTouched: false}));\n  };\n\n  const resetChangesHandler = () => {\n    setForm(initialState);\n  };\n\n  const signOutHandler = (evt: React.MouseEvent<HTMLButtonElement>) => {\n    evt.preventDefault();\n    dispatch(makeSignOut());\n  };\n\n  const cleaner = useCallback(() => {\n    if (wsAuthConnected) {\n      dispatch(wsConnectionAuthClose());\n    }\n  }, [wsAuthConnected, dispatch]);\n\n  useEffect(() => {\n    if (match && !wsAuthConnected) {\n      dispatch(wsConnectionAuthStart(`${WS_URL}?token=${getCookie('token')}`))\n    };\n    if (!match && wsAuthConnected) {\n      dispatch(wsConnectionAuthClose());\n    };\n  }, [match, dispatch, wsAuthConnected]);\n\n  useEffect(() => {\n    return cleaner\n  }, [cleaner]);\n\n  return (\n    <Layout>\n      <section className={'container mt-30 ' + styles.profile}>\n        <div className={styles.navbar + ' mr-15'}>\n          <NavLink\n            exact\n            to={Paths.PROFILE}\n            className={styles.link + ' text text_type_main-medium mb-5'}\n            activeClassName={styles.active}\n          >\n            Профиль\n          </NavLink>\n          <NavLink\n            exact\n            to={Paths.ORDERS}\n            className={styles.link + ' text text_type_main-medium mb-5'}\n            activeClassName={styles.active}\n          >\n            История заказов\n          </NavLink>\n          <button\n            type=\"button\"\n            className={\n              styles.button + ' ' + styles.link + ' text text_type_main-medium'\n            }\n            onClick={signOutHandler}\n          >\n            Выход\n          </button>\n          <p\n            className={\n              styles.description + ' mt-20 text text_type_main-default'\n            }\n          >\n            {!match && 'В этом разделе вы можете изменить свои персональные данные'}\n            {match && 'В этом разделе вы можете просмотреть свою историю заказов'}\n          </p>\n        </div>\n        {!match && <div className={styles.form}>\n          <form className=\"mb-20\">\n            <Input\n              type={'text'}\n              name={'name'}\n              disabled={nameDisabled}\n              onIconClick={() => setNameDisabled(false)}\n              onBlur={() => setNameDisabled(true)}\n              placeholder={'Имя'}\n              icon={'EditIcon'}\n              value={form.name || ''}\n              onChange={formChangeHandler}\n            />\n            <Input\n              type={'email'}\n              name={'email'}\n              disabled={mailDisabled}\n              onIconClick={() => setMailDisabled(false)}\n              onBlur={() => setMailDisabled(true)}\n              value={form.email || ''}\n              placeholder={'E-mail'}\n              icon={'EditIcon'}\n              onChange={formChangeHandler}\n            />\n            <Input\n              type={'password'}\n              name={'password'}\n              disabled={passwordDisabled}\n              onIconClick={() => setPasswordDisabled(false)}\n              onBlur={() => setPasswordDisabled(true)}\n              value={form.password || ''}\n              onChange={formChangeHandler}\n              placeholder={'Пароль'}\n              icon={'EditIcon'}\n            />\n          </form>\n          {form.isTouched && (\n            <div className={styles.actions}>\n              <Button type=\"primary\" size=\"medium\" onClick={saveChangesHandler}>\n                Сохранить\n              </Button>\n              <Button\n                type=\"primary\"\n                size=\"medium\"\n                onClick={resetChangesHandler}\n              >\n                Отмена\n              </Button>\n            </div>\n          )}\n        </div>}\n        {match && sortedOrders && sortedOrders.length &&\n          <div className={styles.orders + \" custom-scroll pr-4\"}>\n            {sortedOrders && sortedOrders.map((order: TFeedItem) => <FeedItem key={order._id} order={order} showStatus/>)}\n          </div>\n        }\n        {match && (!sortedOrders || !sortedOrders.length) && <Loader size='large' />}\n      </section>\n    </Layout>\n  );\n};\n\nexport default ProfilePage;\n","import React, {ChangeEvent, useState} from 'react';\nimport Layout from './layout';\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './forms.module.css';\nimport { Link, Redirect } from 'react-router-dom';\nimport { useDispatch, useSelector } from '../utils/hooks';\nimport { showNotification } from '../services/actions/app';\nimport { Paths } from '../utils/data';\nimport { registerUser } from '../services/actions/user';\n\nconst RegisterPage = () => {\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    password: '',\n  });\n\n  const dispatch = useDispatch();\n  const {isAuthorized, justRegistered} = useSelector(store => store.user);\n\n  if (isAuthorized) {\n    return (\n      <Redirect to={{pathname: Paths.HOME}} />\n    )\n  };\n\n  if (justRegistered) {\n    return (\n      <Redirect to={{pathname: Paths.HOME}} />\n    )\n  };\n\n  const formSubmitHandler = (evt: React.FormEvent) => {\n    evt.preventDefault();\n    if (form.name.trim() === '' || form.email.trim() === '' || form.password.trim() === '') {\n      dispatch(showNotification('Заполните все поля формы'))\n    } else {\n      dispatch(registerUser(form));\n    }\n  }\n\n  const formChangeHandler = (evt: ChangeEvent<HTMLInputElement>) => {\n    setForm(prevForm => ({...prevForm, [evt.target.name]: evt.target.value}))\n  }\n\n  return (\n    <Layout>\n      <section className={styles.login}>\n        <div className={\"mb-20 \" + styles.form}>\n          <h2 className={\"text text_type_main-medium mb-6 \" + styles.heading}>Регистрация</h2>\n          <form className=\"mb-20\" onSubmit={formSubmitHandler}>\n            <Input \n              type={'text'} \n              placeholder={'Имя'}\n              name='name'\n              value={form.name}\n              onChange={formChangeHandler}\n            />\n            <Input \n              type={'email'} \n              placeholder={'E-mail'}\n              name='email'\n              value={form.email}\n              onChange={formChangeHandler}\n            />\n            <Input \n              type={'password'} \n              placeholder={'Пароль'}\n              icon={'ShowIcon'}\n              name='password'\n              value={form.password}\n              onChange={formChangeHandler}\n            />\n            <Button type=\"primary\" size=\"medium\">\n              Зарегистрироваться\n            </Button>\n          </form>\n          <div className={\"text text_type_main-default \" + styles.actions}>\n            <div className=\"mb-4\">\n              <span>Уже зарегистрированы? </span>\n              <Link to={Paths.LOGIN}>\n                Войти\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n\nexport default RegisterPage;\n","import React, {ChangeEvent, FormEvent, useState} from 'react';\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './forms.module.css';\nimport { Link, Redirect } from 'react-router-dom';\nimport Layout from './layout';\nimport { Paths } from '../utils/data';\nimport { useDispatch, useSelector } from '../utils/hooks';\nimport { showNotification } from '../services/actions/app';\nimport { resetPassword } from '../services/actions/user';\n\nconst ResetPasswordPage = () => {\n  const [form, setForm] = useState({password: '', code: ''});\n  const dispatch = useDispatch();\n  const isAuthorized = useSelector(store => store.user.isAuthorized);\n  const requested = useSelector(store => store.user.recoveryRequested);\n  const recoveryDone = useSelector(store => store.user.recoveryDone);\n\n  if (isAuthorized) {\n    return (\n      <Redirect to={{pathname: Paths.HOME}} />\n    )\n  };\n\n  if (!requested && !recoveryDone) {\n    return (\n      <Redirect to={{pathname: Paths.FORGOT}} />\n    )\n  };\n\n  if (recoveryDone) {\n    return (\n      <Redirect to={{pathname: Paths.LOGIN}} />\n    )\n  };\n\n\n  const formChangeHandler = (evt: ChangeEvent<HTMLInputElement>) => {\n    setForm(prevForm => ({...prevForm, [evt.target.name]: evt.target.value}));\n  };\n\n  const submitHandler = (evt: FormEvent) => {\n    evt.preventDefault();\n    if (form.password.trim() === '' || form.code.trim() === '') {\n      dispatch(showNotification('Заполните все поля!'))\n    } else {\n      dispatch(resetPassword(form));\n    }\n  }\n\n  return (\n    <Layout>\n      <section className={styles.login}>\n        <div className={\"mb-20 \" + styles.form}>\n          <h2 className={\"text text_type_main-medium mb-6 \" + styles.heading}>Восстановление пароля</h2>\n          <form className=\"mb-20\" onSubmit={submitHandler}>\n            <Input \n              type={'password'} \n              placeholder={'Введите новый пароль'}\n              icon={'ShowIcon'}\n              name='password'\n              value={form.password}\n              onChange={formChangeHandler}\n            />\n            <Input \n              type={'text'} \n              placeholder={'Введите код из письма'}\n              name='code'\n              value={form.code}\n              onChange={formChangeHandler}\n            />\n            <Button type=\"primary\" size=\"medium\">\n              Сохранить\n            </Button>\n          </form>\n          <div className={\"text text_type_main-default \" + styles.actions}>\n            <div className=\"mb-4\">\n              <span>Вспомнили пароль? </span>\n              <Link to={Paths.LOGIN}>\n                Войти\n              </Link>\n            </div>\n          </div>\n        </div>\n      </section>\n    </Layout>\n  );\n}\n\nexport default ResetPasswordPage;\n","import React from 'react';\nimport Page404 from '../components/page-404/page-404';\nimport Layout from './layout';\n\nconst NotFoundPage = () => {\n  return (\n    <Layout>\n      <Page404 />\n    </Layout>\n  );\n}\n\nexport default NotFoundPage;\n","import { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport React, {FC} from 'react';\nimport styles from './order-ingredient.module.css';\n\ninterface IOrderIngredient {\n  image: string;\n  name: string;\n  count: number;\n  price: number;\n}\n\nconst OrderIngredient: FC<IOrderIngredient> = ({image, name, count, price}) => {\n  return (\n    <div className={styles.ingredient + \" mb-4\"}>\n      <div className={styles.image + \" mr-4\"}>\n        <img src={image} alt={name} />\n      </div>\n      <div className={styles.name + \" text text_type_main-default\"}>{name}</div>\n      <div className={styles.price + \" ml-4 text text_type_digits-default\"}>{count} x {price.toLocaleString('ru-RU')} <CurrencyIcon type='primary'/></div>\n    </div>\n  )\n};\n\nexport default OrderIngredient;","import { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\nimport React from 'react';\nimport { useParams } from 'react-router-dom';\nimport { TFeedItem, TItem } from '../../types';\nimport { Status } from '../../utils/data';\nimport { formatDate } from '../../utils/date';\nimport { useSelector } from '../../utils/hooks';\nimport OrderIngredient from '../order-ingredient/order-ingredient';\nimport styles from './order-content.module.css';\n\nconst OrderContent = () => {\n  const {id} = useParams<{id: string}>();\n  const {orders} = useSelector(store => store.ws.feed);\n  const {orders: orderHistory} = useSelector(store => store.ws.orderHistory);  \n  const {list} = useSelector(store => store.ingredient);\n  \n  let allOrders = [];\n\n  if (orders && orders.length) {\n    allOrders = orders.concat(orderHistory);\n  }\n\n  if (orderHistory && orderHistory.length) {\n    allOrders = allOrders.concat(orderHistory);\n  }\n\n  const item: TFeedItem = allOrders.find((order: TFeedItem) => order._id === id);\n\n  if (!item) {\n    return null;\n  }\n\n  const {ingredients, status, name, createdAt, number} = item;\n\n  const uniqIngredients = [...new Set(ingredients)];\n\n  const ingredientsData = uniqIngredients.map((id: string) => {\n    const ing: TItem & {count: number} = {...list.find(item => item._id === id)!, count: 0};\n    ingredients.forEach(item => {\n      if (ing._id === item) {\n        ing.count++;\n      }\n    });\n    ing.count = ing.type === 'bun' ? 2 : ing.count;\n    return ing;\n  })\n  \n  return (\n    <article className={styles.order}>\n      <p className={styles.number + \" text text_type_digits-default mb-10 \"}>#{number}</p>\n      <h2 className=\"text text_type_main-medium mb-3\">{name}</h2>\n      <p className={styles.status + \" text text_type_main-default mb-15\"}>{Status[status]}</p>\n      <p className=\"text text_type_main-medium mb-6\">Состав:</p>\n      <div className={styles.content + \" custom-scroll pr-8 mb-10\"}>\n        {\n          ingredientsData.map(ing => <OrderIngredient key={ing._id} image={ing.image} name={ing.name} count={ing.count} price={ing.price} /> )\n        }\n      </div>\n      <div className={styles.footer}>\n        <span className={styles.date + \" text text_type_main-default\"}>{formatDate(new Date(createdAt))}</span>\n        <span className={styles.total + \" ml-4 text text_type_digits-default\"}>{ingredientsData.reduce((acc, ing) => acc + ing.price*ing.count, 0).toLocaleString('ru-RU')} <CurrencyIcon type='primary' /></span>\n      </div>\n    </article>\n  )\n};\n\nexport default OrderContent;\n","import React, { FC, useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from '../utils/hooks';\nimport { useParams } from 'react-router-dom';\nimport OrderContent from '../components/order-contetnt/order-content';\nimport Layout from './layout';\nimport type { TFeedItem } from '../types';\nimport Page404 from '../components/page-404/page-404';\nimport { Loader } from '../components/loader/loader';\nimport {\n  wsConnectionAuthClose,\n  wsConnectionAuthStart,\n  wsConnectionClose,\n  wsConnectionStart,\n} from '../services/actions/web-socket';\nimport { WS_URL } from '../utils/data';\nimport { getCookie } from '../utils/cookies';\n\ninterface IOrderPage {\n  privateRoute?: boolean;\n}\n\nconst OrderPage: FC<IOrderPage> = ({ privateRoute }) => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (privateRoute) {\n      dispatch(wsConnectionAuthStart(`${WS_URL}?token=${getCookie('token')}`));\n    } else {\n      dispatch(wsConnectionStart(`${WS_URL}/all`));\n    }\n    return () => {\n      if (privateRoute) {\n        dispatch(wsConnectionAuthClose());\n      } else {\n        dispatch(wsConnectionClose());\n      }\n    };\n  }, [dispatch, privateRoute]);\n\n  const { id } = useParams<{ id: string }>();\n  const { orders } = useSelector((store) => store.ws.feed);\n  const { orders: orderHistory } = useSelector(\n    (store) => store.ws.orderHistory\n  );\n\n  const orderBase = privateRoute ? orderHistory : orders;\n\n  const orderIndex = useMemo(() => {\n    if (orderBase && orderBase.length) {\n      return orderBase\n        .map((order: TFeedItem) => order._id)\n        .findIndex((orderId: string) => orderId === id);\n    }\n  }, [orderBase, id]);\n\n  let content;\n\n  if (orderBase && orderBase.length && orderIndex >= 0) {\n    content = <OrderContent />;\n  }\n\n  if (orderBase && orderBase.length && orderIndex < 0) {\n    content = <Page404 />;\n  }\n\n  if (!orderBase || !orderBase.length) {\n    content = <Loader size=\"large\" />;\n  }\n\n  return (\n    <Layout>\n      <div className=\"mt-20\">{content}</div>\n    </Layout>\n  );\n};\n\nexport default OrderPage;\n","import React, {FC} from 'react';\nimport styles from './order-list.module.css';\n\ninterface IOrderList {\n  heading: string;\n  items: number[];\n}\n\nconst OrderList: FC<IOrderList> = ({heading, items}) => {\n  return (\n    <div className={styles.list}>\n      <h3 className=\"text text_type_main-medium mb-6\">{heading}</h3>\n      <ul className={styles.list + \" custom-scroll\"}>\n        {items.map((itemNumber: number) => <li key={itemNumber} className={styles.item + \" text text_type_digits-default mb-2\"}>{itemNumber}</li>)}\n      </ul>\n    </div>\n  );\n} \n\nexport default OrderList;\n","import React, {FC} from 'react';\n\ninterface IFigure {\n  label: string;\n  value: number;\n}\n\nconst Figure: FC<IFigure> = ({label, value}) => {\n  return (\n    <article className=\"mb-15\">\n      <h3 className=\"text text_type_main-medium mb-6\">{label}</h3>\n      <p className=\"text text_type_digits-large\">{value && value.toLocaleString('ru-RU')}</p>\n    </article>\n  );\n}\n\nexport default Figure;\n","import React, {useEffect} from 'react';\nimport Layout from './layout';\nimport styles from './feed.module.css';\nimport { useDispatch, useSelector } from '../utils/hooks';\nimport FeedItem from '../components/feed-item/feed-item';\nimport { TFeedItem } from '../types';\nimport OrderList from '../components/order-list/order-list';\nimport Figure from '../components/figure/figure';\nimport { wsConnectionClose, wsConnectionStart } from '../services/actions/web-socket';\nimport { WS_URL } from '../utils/data';\nimport { Loader } from '../components/loader/loader';\n\nconst FeedPage = () => {\n  const {orders, total, totalToday} = useSelector(store => store.ws.feed);\n\n  const ordersDone = orders ? orders.filter((order: TFeedItem) => order.status === 'done').map((order: TFeedItem) => order.number).slice(0, 5) : [];\n  const ordersInProgress = orders ? orders.filter((order: TFeedItem) => order.status === 'created' || order.status === 'pending').map((order: TFeedItem) => order.number) : [];\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(wsConnectionStart(`${WS_URL}/all`));\n    return () => {\n      dispatch(wsConnectionClose());\n    }\n  }, [dispatch]);\n\n  return (\n    <Layout>\n      {orders && orders.length &&\n        <section className={styles.feed + \" wrapper container mt-10\"}>\n          <h2 className=\"text text_type_main-large mb-5\">Лента заказов</h2>\n          <div className={styles.content}>\n          <div className={styles.orders + \" custom-scroll mr-15 pr-4\"}>\n            {\n              orders && orders.length && orders.map((order: TFeedItem, i: number) => <FeedItem key={i} order={order} />)\n            }\n          </div>\n          <div className={styles.stats}>\n            <div className={styles.state + \" mb-15\"}>\n              <OrderList heading='Готовы:' items={ordersDone}/>\n              <OrderList heading='В работе:' items={ordersInProgress}/>\n            </div>\n            <div className={styles.figures}>\n              <Figure label=\"Выполнено за все время:\" value={total} />\n              <Figure label=\"Выполнено за сегодня:\" value={totalToday} />\n            </div>\n          </div>\n          </div>\n        </section>\n      }\n      {(!orders || !orders.length) && <Loader size='large' />}\n    </Layout>\n  );\n}\n\nexport default FeedPage;\n","import React, {FC} from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { checkAuth } from '../../services/actions/user';\nimport { useDispatch, useSelector } from '../../utils/hooks';\nimport { Paths } from '../../utils/data';\n\ninterface IProtectedRoute {\n  path: string;\n  exact?: boolean;\n  rest?: any;\n}\n\nexport const ProtectedRoute: FC<IProtectedRoute> = ({ children, ...rest }) => {\n  const [isUserLoaded, setUserLoaded] = useState(false);\n  const dispatch = useDispatch();\n  const isAuthorized = useSelector(store => store.user.isAuthorized);\n\n  useEffect(() => {\n    dispatch(checkAuth());\n    setUserLoaded(true);    \n  }, [dispatch]);\n\n  if (!isUserLoaded) {\n    return null;\n  }\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) => isAuthorized ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: Paths.LOGIN,\n              state: { from: location, oldState: location.state }\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n","import React from 'react';\nimport { useDispatch } from '../../utils/hooks';\nimport { Switch, Route, useLocation, useHistory } from 'react-router-dom';\nimport {\n  ForgotPasswordPage,\n  HomePage,\n  IngredientPage,\n  LoginPage,\n  NotFoundPage,\n  ProfilePage,\n  RegisterPage,\n  ResetPasswordPage,\n  FeedPage,\n  OrderPage,\n} from '../../pages';\nimport { removeIngredient } from '../../services/actions';\nimport { Paths } from '../../utils/data';\nimport IngredientDetails from '../ingredient-details/ingredient-details';\nimport Modal from '../modal/modal';\nimport { ProtectedRoute } from '../protected-route/protected-route';\nimport OrderContent from '../order-contetnt/order-content';\ninterface ILocation {\n  pathname: string;\n  state: {\n    background: ILocation;\n    modal: 'ingredient' | 'order';\n    from?: string;\n  };\n  background: ILocation;\n  modal: 'ingredient' | 'order';\n  from?: string;\n  search: string;\n  hash: string;\n  key: string;\n}\n\nconst Switcher = () => {\n  const dispatch = useDispatch();\n  const location = useLocation<ILocation>();\n  const history = useHistory();\n\n  let background = location.state && location.state.background;\n  const modalType = location.state && location.state.modal;\n\n  const detailsHideHandler = () => {\n    dispatch(removeIngredient());\n    history.replace({ pathname: Paths.HOME });\n  };\n\n  const orderHideHandler = () => {\n    history.replace({ pathname: location.state.from });\n  };\n\n  return (\n    <div>\n      <Switch location={background || location}>\n        <Route path={Paths.HOME} exact={true}>\n          <HomePage />\n        </Route>\n        <Route path={Paths.LOGIN} exact={true}>\n          <LoginPage />\n        </Route>\n        <Route path={Paths.REGISTER} exact={true}>\n          <RegisterPage />\n        </Route>\n        <Route path={Paths.FORGOT} exact={true}>\n          <ForgotPasswordPage />\n        </Route>\n        <Route path={Paths.RESET} exact={true}>\n          <ResetPasswordPage />\n        </Route>\n        <ProtectedRoute path={`${Paths.ORDERS}/:id`} exact={true}>\n          <OrderPage privateRoute />\n        </ProtectedRoute>\n        <ProtectedRoute path={Paths.PROFILE}>\n          <ProfilePage />\n        </ProtectedRoute>\n        <Route path={Paths.FEED} exact={true}>\n          <FeedPage />\n        </Route>\n        <Route path={`${Paths.FEED}/:id`} exact={true}>\n          <OrderPage />\n        </Route>\n        <Route path={`${Paths.INGREDIENTS}/:id`} exact={true}>\n          <IngredientPage />\n        </Route>\n        <Route>\n          <NotFoundPage />\n        </Route>\n      </Switch>\n\n      {background && modalType === 'ingredient' && (\n        <Route path={`${Paths.INGREDIENTS}/:id`}>\n          <Modal onClose={detailsHideHandler} heading={'Детали ингредиента'}>\n            <IngredientDetails />\n          </Modal>\n        </Route>\n      )}\n\n      {background &&\n        modalType === 'order' &&\n        location.state.from === Paths.FEED && (\n          <Route path={`${location.state.from}/:id`}>\n            <Modal onClose={orderHideHandler}>\n              <OrderContent />\n            </Modal>\n          </Route>\n        )}\n\n      {background &&\n        modalType === 'order' &&\n        location.state.from === Paths.ORDERS && (\n          <ProtectedRoute path={`${location.state.from}/:id`}>\n            <Modal onClose={orderHideHandler}>\n              <OrderContent />\n            </Modal>\n          </ProtectedRoute>\n        )}\n    </div>\n  );\n};\n\nexport default Switcher;\n","import React, {useEffect} from 'react';\nimport { useDispatch } from '../../utils/hooks';\nimport { BrowserRouter as Router,} from 'react-router-dom';\nimport { getInredients } from '../../services/actions/ingredient';\nimport { checkAuth } from '../../services/actions/user';\nimport Switcher from '../switcher/switcher';\n// import { wsConnectionAuthStart } from '../../services/actions/web-socket';\n// import { WS_URL } from '../../utils/data';\n// import { getCookie } from '../../utils/cookies';\n\nfunction App() {\n  const dispatch = useDispatch();\n  // const {isAuthorized} = useSelector(store => store.user);\n  \n  useEffect(() => {\n    dispatch(getInredients());\n    dispatch(checkAuth());\n  }, [dispatch]);\n  \n  // useEffect(() => {\n  //   if (isAuthorized) {\n  //     dispatch(wsConnectionAuthStart(`${WS_URL}?token=${getCookie('token')}`));\n  //   }\n  // }, [dispatch, isAuthorized]);\n  \n  return (\n    <Router>\n      <Switcher />\n    </Router>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import type { TItem, TOrder } from './../../types/index';\nimport {\n  GET_INGREDIENTS_REQUEST,\n  GET_INGREDIENTS_SUCCESS,\n  GET_INGREDIENTS_FAILED,\n  SET_CART,\n  RESET_CART,\n  ADD_TO_CART,\n  REMOVE_FROM_CART,\n  SET_INGREDIENT,\n  REMOVE_INGREDIENT,\n  ORDER_REQUEST,\n  ORDER_SUCCESS,\n  ORDER_FAILED,\n  ORDER_RESET,\n} from '../actions/ingredient';\n\nimport type {\n  TIngredientActions\n} from '../actions/ingredient';\n\ntype TIngridientState = {\n  list: ReadonlyArray<TItem>;\n  ingredientsRequest: boolean;\n  ingredientsFailed: boolean;\n  ingredientsLoaded: boolean;\n\n  cart: ReadonlyArray<TItem>;\n  currentIngredient: TItem | {};\n\n  order: TOrder | {};\n  orderRequest: boolean;\n  orderFailed: boolean;\n}\n\nconst initialState: TIngridientState = {\n  list: [],\n  ingredientsRequest: false,\n  ingredientsFailed: false,\n  ingredientsLoaded: false,\n\n  cart: [],\n  currentIngredient: {},\n\n  order: {},\n  orderRequest: false,\n  orderFailed: false,\n};\n\nconst ingredientReducer = (state = initialState, action: TIngredientActions) => {\n  switch (action.type) {\n    case GET_INGREDIENTS_SUCCESS: {\n      return {\n        ...state,\n        list: action.payload,\n        ingredientsRequest: false,\n        ingredientsFailed: false,\n        ingredientsLoaded: true,\n      };\n    }\n    case GET_INGREDIENTS_FAILED: {\n      return {\n        ...state,\n        ingredientsFailed: true,\n        ingredientsRequest: false,\n      };\n    }\n    case GET_INGREDIENTS_REQUEST: {\n      return {\n        ...state,\n        ingredientsRequest: true,\n        ingredientsFailed: false,\n      };\n    }\n    case SET_CART: {\n      return {\n        ...state,\n        cart: action.payload,\n      };\n    }\n    case RESET_CART: {\n      return {\n        ...state,\n        cart: [],\n      };\n    }\n    case ADD_TO_CART: {\n      if (action.payload.type === 'bun' && state.cart.findIndex(item => item.type === 'bun') >= 0) {\n        const newCart = state.cart.map(item => item.type === 'bun' ? action.payload : item);\n\n        return {\n          ...state,\n          cart: newCart,\n        }\n      }\n      return {\n        ...state,\n        cart: [...state.cart, action.payload],\n      };\n    }\n    case REMOVE_FROM_CART: {\n      return {\n        ...state,\n        cart: state.cart.filter((item, index) => index !== action.payload),\n      }\n    }\n    case SET_INGREDIENT: {\n      return {\n        ...state,\n        currentIngredient: action.payload,\n      };\n    }\n    case REMOVE_INGREDIENT: {\n      return {\n        ...state,\n        currentIngredient: {},\n      };\n    }\n    case ORDER_REQUEST: {\n      return {\n        ...state,\n        orderRequest: true,\n        orderFailed: false,\n      };\n    }\n    case ORDER_FAILED: {\n      return {\n        ...state,\n        orderFailed: true,\n        orderRequest: false,\n      };\n    }\n    case ORDER_SUCCESS: {\n      return {\n        ...state,\n        orderFailed: false,\n        orderRequest: false,\n        order: action.payload,\n      };\n    }\n    case ORDER_RESET: {\n      return {\n        ...state,\n        order: {},\n        orderRequest: false,\n        orderFailed: false,      \n      }\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\nexport { ingredientReducer };\n","import type { TAppActions } from '../actions/app';\nimport { SET_ERROR, SET_MESSAGE, SHOW_LOADER, HIDE_LOADER, LOCK_CONSTRUCTOR, UNLOCK_CONSTRUCTOR } from \"../actions/app\"\n\ntype TAppState = {\n  error: boolean;\n  loader: boolean;\n  message: string;\n  locked: boolean;\n};\n\nconst initialState: TAppState = {\n  error: false,\n  loader: false,\n  message: '',\n  locked: false,\n}\n\nconst appReducer = (state = initialState, action: TAppActions) => {\n  switch (action.type) {\n    case SET_ERROR: {\n      return {\n        ...state,\n        error: true,\n      }\n    }\n    case SET_MESSAGE: {\n      return {\n        ...state,\n        message: action.payload,\n      }\n    }\n    case SHOW_LOADER: {\n      return {\n        ...state,\n        loader: true,\n      }\n    }\n    case HIDE_LOADER: {\n      return {\n        ...state,\n        loader: false,\n      }\n    }\n    case LOCK_CONSTRUCTOR: {\n      return {\n        ...state,\n        locked: true,\n      }\n    }\n    case UNLOCK_CONSTRUCTOR: {\n      return {\n        ...state,\n        locked: false,\n      }\n    }\n    default: {\n      return state;\n    }\n  }\n}\n\nexport {appReducer};","import {\n  SIGN_IN,\n  SIGN_OUT,\n  REQUEST_RECOVERY,\n  RECOVERY_SUCCESS,\n  REGISTRATION_SUCCESS,\n} from '../actions/user';\n\nimport type {\n  TUserActions\n} from '../actions/user';\n\ntype TUserState = {\n  isAuthorized: boolean;\n  recoveryRequested: boolean;\n  recoveryDone: boolean;\n  justRegistered: boolean;\n  name: string;\n  email: string;\n  password: string;\n};\n\nconst initialState: TUserState = {\n  isAuthorized: false,\n  recoveryRequested: false,\n  recoveryDone: false,\n  justRegistered: false,\n  name: '',\n  email: '',\n  password: ''\n};\n\nconst userReducer = (state = initialState, action: TUserActions) => {\n  switch (action.type) {\n    case SIGN_IN: {\n      return {\n        ...state,\n        isAuthorized: true,\n        ...action.payload\n      };\n    }\n    case SIGN_OUT: {\n      return {\n        ...initialState,\n      };\n    }\n    case REQUEST_RECOVERY: {\n      return {\n        ...state,\n        recoveryRequested: true,\n      }\n    }\n    case RECOVERY_SUCCESS: {\n      return {\n        ...state,\n        recoveryRequested: false,\n        recoveryDone: true,\n      }\n    }\n    case REGISTRATION_SUCCESS: {\n      return {\n        ...state,\n        justRegistered: true,\n      }\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\nexport { userReducer };\n","import { TWSActions } from './../actions/web-socket';\nimport {\n  WS_CONNECTION_CLOSED,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_SUCCESS,\n  WS_GET_MESSAGE,\n  WS_CONNECTION_AUTH_CLOSED,\n  WS_CONNECTION_AUTH_ERROR,\n  WS_CONNECTION_AUTH_SUCCESS,\n  WS_GET_AUTH_MESSAGE,\n} from '../actions/web-socket';\n\ntype TWSState = {\n  wsConnected: boolean;\n  wsAuthConnected: boolean;\n  feed: any;\n  orderHistory: any;\n};\n\nconst initialState: TWSState = {\n  wsConnected: false,\n  wsAuthConnected: false,\n  feed: {},\n  orderHistory: {},\n};\n\nconst wsReducer = (state = initialState, action: TWSActions) => {\n\n  switch (action.type) {\n    case WS_CONNECTION_SUCCESS:\n      return {\n        ...state,\n        wsConnected: true,\n      };\n\n    case WS_CONNECTION_ERROR:\n      return {\n        ...state,\n        wsConnected: false,\n      };\n\n    case WS_CONNECTION_CLOSED:\n      return {\n        ...state,\n        wsConnected: false,\n      };\n\n    case WS_GET_MESSAGE:\n      return {\n        ...state,\n        feed: action.payload,\n      };\n\n    case WS_CONNECTION_AUTH_SUCCESS:\n      return {\n        ...state,\n        wsAuthConnected: true,\n      };\n\n    case WS_CONNECTION_AUTH_ERROR:\n      return {\n        ...state,\n        wsAuthConnected: false,\n      };\n\n    case WS_CONNECTION_AUTH_CLOSED:\n      return {\n        ...state,\n        wsAuthConnected: false,\n      };\n\n    case WS_GET_AUTH_MESSAGE:\n      return {\n        ...state,\n        orderHistory: action.payload,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport { wsReducer };\n","import {combineReducers} from 'redux';\nimport {ingredientReducer} from './ingredient';\nimport {appReducer} from './app';\nimport { userReducer } from './user';\nimport {wsReducer} from './web-socket';\n\nexport const rootReducer = combineReducers({\n  ingredient: ingredientReducer,\n  app: appReducer,\n  user: userReducer,\n  ws: wsReducer,\n})","import { AppDispatchActions, RootState } from './../../types/index';\nimport type { TApplicationActions } from \"../../types\";\nimport {Middleware, MiddlewareAPI} from 'redux';\n\nexport const socketMiddleware = (wsActions: any): Middleware => {\n  return (store: MiddlewareAPI<AppDispatchActions, RootState>) => {\n    let socket: WebSocket | null = null;\n\n    return next => (action: TApplicationActions) => {\n      const { dispatch } = store;\n      const { type } = action;\n      const { wsInit, wsClose, onOpen, onClose, onError, onMessage } = wsActions;\n\n      if (type === wsInit) {\n        //@ts-ignore\n        socket = new WebSocket(action.payload);\n      }\n\n      if (socket && type === wsClose) {\n        socket.close();\n      }\n\n      if (socket) {\n        socket.onopen = event => {\n          dispatch({ type: onOpen, payload: event });\n        };\n        \n        socket.onerror = event => {\n          dispatch({ type: onError, payload: event });\n        };\n        \n        socket.onmessage = event => {\n          const { data } = event;\n          const parsedData = JSON.parse(data);\n          const { success, ...restParsedData } = parsedData;\n\n          dispatch({ type: onMessage, payload: restParsedData });\n        };\n\n        socket.onclose = event => {\n          socket = null;\n          dispatch({ type: onClose, payload: event });\n        };\n      }\n\n      next(action);\n    };\n  };\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app/App';\nimport reportWebVitals from './reportWebVitals';\nimport {compose, createStore, applyMiddleware} from 'redux';\nimport {Provider} from 'react-redux';\nimport thunk from 'redux-thunk';\nimport {rootReducer} from './services/reducers';\n\nimport {\n  WS_CONNECTION_AUTH_CLOSE,\n  WS_CONNECTION_AUTH_CLOSED,\n  WS_CONNECTION_AUTH_ERROR,\n  WS_CONNECTION_AUTH_START,\n  WS_CONNECTION_AUTH_SUCCESS,\n  WS_CONNECTION_CLOSE,\n  WS_CONNECTION_CLOSED,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_GET_AUTH_MESSAGE,\n  WS_GET_MESSAGE,\n} from './services/actions/web-socket';\n\nimport { socketMiddleware } from './services/middleware';\n\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n  }\n}\n\nconst composeEnhancers =\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    : compose;\n    \n    const wsActions = {\n      wsInit: WS_CONNECTION_START,\n      onOpen: WS_CONNECTION_SUCCESS,\n      onClose: WS_CONNECTION_CLOSED,\n      onError: WS_CONNECTION_ERROR,\n      onMessage: WS_GET_MESSAGE,\n      wsClose: WS_CONNECTION_CLOSE,\n    };\n\n    \n    const wsAuthActions = {\n      wsInit: WS_CONNECTION_AUTH_START,\n      onOpen: WS_CONNECTION_AUTH_SUCCESS,\n      onClose: WS_CONNECTION_AUTH_CLOSED,\n      onError: WS_CONNECTION_AUTH_ERROR,\n      onMessage: WS_GET_AUTH_MESSAGE,\n      wsClose: WS_CONNECTION_AUTH_CLOSE,\n    };\n\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware(wsActions), socketMiddleware(wsAuthActions)));\n\nexport const store = createStore(rootReducer, enhancer);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1iHLW\",\"wrapper\":\"app-header_wrapper__ECTu6\",\"menu\":\"app-header_menu__3SLom\",\"usermenu\":\"app-header_usermenu__2ygMA\",\"button\":\"app-header_button__1tHq1\",\"active\":\"app-header_active__1gFZ7\",\"logo\":\"app-header_logo__zVEfY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor\":\"burger-constructor_constructor__2Wifa\",\"top\":\"burger-constructor_top__3B8eW\",\"bottom\":\"burger-constructor_bottom__1l2yp\",\"content\":\"burger-constructor_content__3FA1X\",\"summary\":\"burger-constructor_summary__1USSk\",\"value\":\"burger-constructor_value__Fo6P-\",\"empty\":\"burger-constructor_empty__P50O1\",\"locked\":\"burger-constructor_locked__2mq9u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"burger-ingredients_ingredients__2TY9H\",\"tab-controls\":\"burger-ingredients_tab-controls__2aWxf\",\"tab-content\":\"burger-ingredients_tab-content__VUE7m\",\"list\":\"burger-ingredients_list__HZyi9\",\"item\":\"burger-ingredients_item__3x5fV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"ingredient-details_details__uP6-A\",\"image\":\"ingredient-details_image__H2-xP\",\"info\":\"ingredient-details_info__14J0F\",\"info-item\":\"ingredient-details_info-item__3pdXI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ingredients_list__1yp3F\",\"item\":\"ingredients_item__3ERdG\",\"withextra\":\"ingredients_withextra__1n68U\",\"extra\":\"ingredients_extra__2UnHC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order-content_order__3xknx\",\"number\":\"order-content_number__glPv8\",\"status\":\"order-content_status__3tASS\",\"content\":\"order-content_content__3ywSc\",\"footer\":\"order-content_footer__iYDdM\",\"total\":\"order-content_total__2L_hp\",\"date\":\"order-content_date__3Akvn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed\":\"feed_feed__3qXwX\",\"content\":\"feed_content__3dS9Z\",\"orders\":\"feed_orders__11DpH\",\"stats\":\"feed_stats__2asQ0\",\"state\":\"feed_state__1slGF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feedItem\":\"feed-item_feedItem__1PSIu\",\"header\":\"feed-item_header__2qw6H\",\"price\":\"feed-item_price__29yPN\",\"footer\":\"feed-item_footer__5mE7t\",\"date\":\"feed-item_date__3UOY6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notification\":\"notification_notification__2lEK8\",\"error\":\"notification_error__1Dac6\",\"active\":\"notification_active__2OWF_\",\"container\":\"notification_container__1rwhz\",\"closeBtn\":\"notification_closeBtn__Fc8Qy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__1DF1f\",\"content\":\"modal_content__1tQ-X\",\"closeBtn\":\"modal_closeBtn__1xRF8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"order-ingredient_ingredient__2qYy1\",\"image\":\"order-ingredient_image__2ABZS\",\"name\":\"order-ingredient_name__4t3yZ\",\"price\":\"order-ingredient_price__33FAt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order-details\":\"order-details_order-details__3xw4W\",\"image\":\"order-details_image__lnOoe\",\"footer-text\":\"order-details_footer-text__14Qyh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"order-list_list__38FhK\",\"item\":\"order-list_item__1fA1V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"ingredient_ingredient__2wfWp\",\"price\":\"ingredient_price__2xF1Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"burger-part_item__3lQx8\",\"btn\":\"burger-part_btn__zydia\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"page-404_container__3dStv\",\"link\":\"page-404_link__1Ofd8\"};"],"sourceRoot":""}